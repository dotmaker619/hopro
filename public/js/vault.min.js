/*
@license

dhtmlxVault v.3.0.0 GPL

This software is covered by GPL license.
To use it in non-GPL project, you need obtain Commercial or Enterprise license
Please contact sales@dhtmlx.com. Usage without proper license is prohibited.
(c) Dinamenta, UAB.

*/
if(window.dhx&&(window.dhx_legacy=dhx,delete window.dhx),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dhx=e():t.dhx=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/codebase/",n(n.s=27)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(43);e.el=i.defineElement,e.sv=i.defineSvgElement,e.view=i.defineView,e.create=i.createView,e.inject=i.injectView,e.disableHelp=function(){i.DEVMODE.mutations=!1,i.DEVMODE.warnings=!1,i.DEVMODE.verbose=!1,i.DEVMODE.UNKEYED_INPUT=!1},e.resizer=function(t){return e.el("iframe",{_hooks:{didInsert:function(e){var n=function(){var n=e.el.offsetHeight,i=e.el.offsetWidth;t(i,n)};e.el.contentWindow.onresize=n,n()}},style:"position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;"})}},function(t,e,n){"use strict";function i(t,e){for(void 0===e&&(e="dhx_id"),t instanceof Event&&(t=t.target);t&&t.getAttribute;){if(t.getAttribute(e))return t;t=t.parentNode}}Object.defineProperty(e,"__esModule",{value:!0}),n(37),e.toNode=function(t){return"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),t||document.body},e.eventHandler=function(t,e){var n=Object.keys(e);return function(i){for(var o=t(i),r=i.target;r;){var a=r.getAttribute&&r.getAttribute("class")||"";if(a.length)for(var s=a.split(" "),l=0;l<n.length;l++)if(s.indexOf(n[l])>-1)return e[n[l]](i,o);r=r.parentNode}return!0}},e.locate=function(t,e){void 0===e&&(e="dhx_id");var n=i(t,e);return n?n.getAttribute(e):""},e.locateNode=i,e.getBox=function(t){var e=t.getBoundingClientRect(),n=document.body,i=window.pageYOffset||n.scrollTop,o=window.pageXOffset||n.scrollLeft;return{top:e.top+i,left:e.left+o,right:n.offsetWidth-e.right,bottom:n.offsetHeight-e.bottom,width:e.right-e.left,height:e.bottom-e.top}};var o=-1;e.getScrollbarWidth=function(){if(o>-1)return o;var t=document.createElement("div");return document.body.appendChild(t),t.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",o=t.offsetWidth-t.clientWidth,document.body.removeChild(t),o},e.fitPosition=function(t,e,n,i){var o=t.left+t.width,r=t.top+t.height;if("bottom"===e)return{position:"absolute",left:l=window.innerWidth<t.left+n?o-n:t.left,top:r+i>window.innerHeight?t.top-i+window.scrollY:r+window.scrollY,minWidth:n};var a=void 0,s=t.top+window.scrollY,l=window.innerWidth<o+n?t.left-n:o;return r+i>window.innerHeight&&(r-i>0?s=r-i+window.scrollY:(a="scroll",i=.8*(window.innerHeight-t.top))),{position:"absolute",left:l,top:s,minWidth:n,overflow:a,height:i}},e.isIE=function(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(4);e.getCss=function(t){var e="";return t.type!==o.ItemType.button&&t.size&&(e+=" "+t.size),t.active&&(e+=" active"),t.$disabled&&(e+=" disabled"),t.css&&(e+=" "+t.css),e},e.getButtonCss=function(t){var e=" ";switch(e+="link"===t.name?"dhx_btn--link":"dhx_btn--flat",e+="large"===t.size?" dhx_btn--large":" dhx_btn--small",t.usage){case"danger":e+=" dhx_btn--danger";break;case"secondary":e+=" dhx_btn--secondary";break;case"success":e+=" dhx_btn--success"}return e},e.counter=function(t){if(t.count)return i.el(".counter",t.count)},e.icon=function(t){void 0===t&&(t="");var e="dhx-icon-block ";return"dxi"===t.slice(0,3)&&(e+="dxi "),i.el("div",{class:e+t})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(new Date).valueOf();e.uid=function(){return"u"+i++},e.extend=function t(e,n,i){if(void 0===i&&(i=!0),n)for(var o in n){var r=n[o],a=e[o];!i||"object"!=typeof a||a instanceof Date||a instanceof Array?e[o]=r:t(a,r)}return e},e.copy=function(t){var e={};for(var n in t)e[n]=t[n];return e},e.naturalSort=function(t){return t.sort(function(t,e){return"string"==typeof t?t.localeCompare(e):t-e})},e.findIndex=function(t,e){for(var n=t.length,i=0;i<n;i++)if(e(t[i]))return i;return-1},e.isEqualString=function(t,e){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toLowerCase()!==e[n].toLowerCase())return!1;return!0},e.singleOuterClick=function(t){var e=function(n){t(n)&&document.removeEventListener("click",e)};document.addEventListener("click",e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5);e.DataEvents=i.DataEvents,function(t){t.button="button",t.input="input",t.separator="separator",t.text="text",t.iconButton="iconButton",t.imageButton="imageButton",t.spacer="spacer",t.menuItem="menuItem",t.imageButtonText="imageButtonText",t.block="block",t.customHTMLButton="customButton",t.selectButton="selectButton",t.dhxButton="dhx-button"}(e.ItemType||(e.ItemType={})),function(t){t.inputCreated="inputcreated",t.click="click"}(e.ToolbarEvents||(e.ToolbarEvents={})),function(t){t.pointer="pointer",t.click="click"}(e.NavigationType||(e.NavigationType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.afterAdd="afteradd",t.beforeAdd="beforeadd",t.removeAll="removeall",t.beforeRemove="beforeremove",t.afterRemove="afterremove",t.change="change",t.load="load"}(e.DataEvents||(e.DataEvents={})),function(t){t.beforeDrag="beforedrag",t.beforeDrop="beforeDrop",t.dragStart="dragstart",t.dragEnd="dragend",t.canDrop="candrop",t.cancelDrop="canceldrop",t.dropComplete="dropcomplete",t.dragOut="dragOut",t.dragIn="dragIn"}(e.DragEvents||(e.DragEvents={})),function(t){t.target="target",t.both="both",t.source="source"}(e.DragMode||(e.DragMode={})),function(t){t.child="child",t.sibling="sibling",t.complex="complex"}(e.DragBehaviour||(e.DragBehaviour={})),function(t){t.beforeUnSelect="beforeunselect",t.afterUnSelect="afterunselect",t.beforeSelect="beforeselect",t.afterSelect="afterselect"}(e.SelectionEvents||(e.SelectionEvents={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5);e.DataEvents=i.DataEvents,e.DragBehaviour=i.DragBehaviour,e.DragMode=i.DragMode,function(t){t[t.all=1]="all",t[t.specific=2]="specific",t[t.leafs=3]="leafs"}(e.TreeFilterType||(e.TreeFilterType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),o=n(21),r=n(22);e.isEqualObj=function(t,e){for(var n in t)if(t[n]!==e[n])return!1;return!0},e.naturalCompare=function(t,e){var n=[],i=[];for(t.replace(/(\d+)|(\D+)/g,function(t,e,i){n.push([e||1/0,i||""])}),e.replace(/(\d+)|(\D+)/g,function(t,e,n){i.push([e||1/0,n||""])});n.length&&i.length;){var o=n.shift(),r=i.shift(),a=o[0]-r[0]||o[1].localeCompare(r[1]);if(a)return a}return n.length-i.length},e.findByConf=function(t,e){if("function"==typeof e){if(e.call(this,t))return t}else if(e.by&&e.match&&t[e.by]===e.match)return t},e.isDebug=function(){var t=window.dhx;if(void 0!==t)return void 0!==t.debug&&t.debug},e.dhxWarning=function(t){console.warn(t)},e.dhxError=function(t){throw new Error(t)},e.toProxy=function(t){var e=typeof t;return"string"===e?new i.DataProxy(t):"object"===e?t:void 0},e.toDataDriver=function(t){if("string"==typeof t)switch(t){case"csv":return new o.CsvDriver;case"json":return new r.JsonDriver;default:console.warn("incorrect driver type",t)}else if("object"==typeof t)return t}},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(6)),i(n(19)),i(n(23)),i(n(36)),i(n(11)),i(n(7)),i(n(21)),i(n(22)),i(n(39))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.events={},this.context=t||this}return t.prototype.on=function(t,e,n){var i=t.toLowerCase();this.events[i]=this.events[i]||[],this.events[i].push({callback:e,context:n||this.context})},t.prototype.detach=function(t,e){var n=t.toLowerCase(),i=this.events[n];if(e)for(var o=i.length-1;o>=0;o--)i[o].context===e&&i.splice(o,1);else this.events[n]=[]},t.prototype.fire=function(t,e){void 0===e&&(e=[]);var n=t.toLowerCase();return!this.events[n]||this.events[n].map(function(t){return t.callback.apply(t.context,e)}).indexOf(!1)<0},t}();e.EventSystem=i,e.EventsMixin=function(t){var e=new i(t=t||{});t.detachEvent=e.detach.bind(e),t.attachEvent=e.on.bind(e),t.callEvent=e.fire.bind(e)}},function(t,e,n){(function(e,n){!function(){var i=1,o={},r=!1;function a(t){e.setImmediate?n(t):e.importScripts?setTimeout(t):(o[++i]=t,e.postMessage(i,"*"))}function s(t){"use strict";if("function"!=typeof t&&void 0!=t)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var e,n,i=this,o=0,r=0,l=[];i.promise=i,i.resolve=function(t){return e=i.fn,n=i.er,o||(r=t,o=1,a(d)),i},i.reject=function(t){return e=i.fn,n=i.er,o||(r=t,o=2,a(d)),i},i._d=1,i.then=function(t,e){if(1!=this._d)throw TypeError();var n=new s;return n.fn=t,n.er=e,3==o?n.resolve(r):4==o?n.reject(r):l.push(n),n},i.catch=function(t){return i.then(null,t)};var u=function(t){o=t||4,l.map(function(t){3==o&&t.resolve(r)||t.reject(r)})};try{"function"==typeof t&&t(i.resolve,i.reject)}catch(t){i.reject(t)}return i;function c(t,e,n,i){if(2==o)return i();if("object"!=typeof r&&"function"!=typeof r||"function"!=typeof t)i();else try{var a=0;t.call(r,function(t){a++||(r=t,e())},function(t){a++||(r=t,n())})}catch(t){r=t,n()}}function d(){var t;try{t=r&&r.then}catch(t){return r=t,o=2,d()}c(t,function(){o=1,d()},function(){o=2,d()},function(){try{1==o&&"function"==typeof e?r=e(r):2==o&&"function"==typeof n&&(r=n(r),o=1)}catch(t){return r=t,u()}r==i?(r=TypeError(),u()):c(t,function(){u(3)},u,function(){u(1==o&&3)})})}}(e=this).setImmediate||e.addEventListener("message",function(t){if(t.source==e)if(r)a(o[t.data]);else{r=!0;try{o[t.data]()}catch(t){}delete o[t.data],r=!1}}),s.resolve=function(t){if(1!=this._d)throw TypeError();return t instanceof s?t:new s(function(e){e(t)})},s.reject=function(t){if(1!=this._d)throw TypeError();return new s(function(e,n){n(t)})},s.all=function(t){if(1!=this._d)throw TypeError();if(!(t instanceof Array))return s.reject(TypeError());var e=new s;return function n(i,o){return o?e.resolve(o):i?e.reject(i):(0==t.reduce(function(t,e){return e&&e.then?t+1:t},0)&&e.resolve(t),void t.map(function(e,i){e&&e.then&&e.then(function(e){return t[i]=e,n(),e},n)}))}(),e},s.race=function(t){if(1!=this._d)throw TypeError();if(!(t instanceof Array))return s.reject(TypeError());if(0==t.length)return new s;var e=new s;return function n(i,o){return o?e.resolve(o):i?e.reject(i):(0==t.reduce(function(t,e){return e&&e.then?t+1:t},0)&&e.resolve(t),void t.map(function(t,e){t&&t.then&&t.then(function(t){n(null,t)},n)}))}(),e},s._d=1,t.exports=s}()}).call(this,n(20),n(32).setImmediate)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(t){this.url=t}return e.prototype.load=function(){return this._ajax(this.url)},e.prototype.save=function(t,e){return this._ajax(this.url,t,{insert:"POST",delete:"DELETE",update:"POST"}[e]||"POST")},e.prototype._ajax=function(e,n,i){return void 0===i&&(i="GET"),new t(function(t,o){var r=new XMLHttpRequest;switch(r.onload=function(){r.status>=200&&r.status<300?t(r.response||r.responseText):o({status:r.status,statusText:r.statusText})},r.onerror=function(){o({status:r.status,statusText:r.statusText})},r.open(i,e),r.setRequestHeader("Content-Type","application/json"),i){case"POST":case"DELETE":case"PUT":r.send(JSON.stringify(n));break;case"GET":default:r.send()}})},e}();e.DataProxy=n}).call(this,n(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(1),r=function(){function t(t,e){this._uid=i.uid(),this.config=e||{}}return t.prototype.mount=function(t,e){e&&(this._view=e),t&&this._view&&this._view.mount&&(this._container=o.toNode(t),this._container.tagName?this._view.mount(this._container):this._container.attach&&this._container.attach(this))},t.prototype.getRootView=function(){return this._view},t.prototype.paint=function(){this._view&&(this._view.node||this._container||!this._view.mount)&&(this._doNotRepaint=!1,this._view.redraw())},t}();e.View=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRealPosition=function(t){var e=t.getBoundingClientRect();return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}},e.calculatePosition=function(t,e){var n=window.pageXOffset+window.innerWidth,i=window.pageYOffset+window.innerHeight,o={left:null,top:null,minWidth:e.width+"px",position:"absolute"};return"bottom"===e.mode?(t.left+e.width>n?o.left=t.left-e.width+"px":o.left=t.left+"px",t.bottom+e.height>i?o.top=t.top-e.height+"px":o.top=t.bottom+"px"):(t.right+e.width>n?o.left=t.left-e.width+"px":o.left=t.right+"px",t.top+e.height>i?o.top=t.bottom-e.height+"px":o.top=t.top+"px"),o},e.addInGroups=function(t,e){t[e.group]?(e.active&&(t[e.group].active=e.id),t[e.group].elements.push(e.id)):t[e.group]={active:e.active?e.id:null,elements:[e.id]}}},function(t,e,n){"use strict";e.__esModule=!0;e.default={dragAndDrop:"Drag & drop",or:"or",browse:"Browse files",filesOrFoldersHere:"files or folders here",cancel:"Cancel",clearAll:"Clear all",clear:"Clear",add:"Add",upload:"Upload",download:"Download",error:"error",byte:"B",kilobyte:"KB",megabyte:"MB",gigabyte:"GB"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(5);var i=n(5);e.DataEvents=i.DataEvents,function(t){t.queue="queue",t.uploaded="uploaded",t.failed="failed",t.inprogress="inprogress"}(e.FileStatus||(e.FileStatus={})),function(t){t.uploadBegin="uploadbegin",t.beforeUploadFile="beforeuploadfile",t.uploadFile="uploadfile",t.uploadFail="uploadfail",t.uploadComplete="uploadcomplete",t.uploadProgress="uploadprogress"}(e.UploaderEvents||(e.UploaderEvents={})),function(t){t.cancel="cancel"}(e.ProgressBarEvents||(e.ProgressBarEvents={})),function(t){t.grid="grid",t.list="list"}(e.VaultMode||(e.VaultMode={}))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(24)),i(n(40)),i(n(25))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(49),o=n(50),r=n(51),a=n(52),s=n(53),l=n(54),u=n(55),c=n(56),d=n(57),f=n(58),p=n(59),h=n(4);function v(t,e){if(t.$hidden)return null;switch(t.type){case h.ItemType.button:return i.button(t);case h.ItemType.text:return p.text(t);case h.ItemType.separator:return d.separator(t);case h.ItemType.spacer:return f.spacer(t);case h.ItemType.input:return u.input(t,e);case h.ItemType.imageButton:return s.imageButton(t);case h.ItemType.iconButton:return a.iconButton(t);case h.ItemType.selectButton:case h.ItemType.menuItem:return c.menuItem(t);case h.ItemType.imageButtonText:return l.imageButtonText(t);case h.ItemType.customHTMLButton:return o.customHTMLButton(t);case h.ItemType.dhxButton:return r.dhx_button(t);case h.ItemType.block:default:throw new Error("unknown item type")}}e.itemfactory=v,e.createFactory=function(t,e){void 0===e&&(e=[]);var n={};return e.forEach(function(t){return n[t]=!0}),function(e,i){return e.type=e.type||t,n[e.type]&&(e.type=t),v(e,i)}}},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=n(0),s=n(9),l=n(60),u=n(1),c=n(12),d=n(8),f=n(13),p=n(17),h=n(4),v=function(t){function e(e,n){var i=t.call(this,e,r.extend({popupWidth:175},n))||this;return i._isContextMenu=!1,i._documentHaveListener=!1,i.events=new s.EventSystem,i.data=new d.TreeCollection({},i.events),i._documentClick=function(t){u.locate(t,"dhx_widget_id")!==i._uid&&i._documentHaveListener&&(document.removeEventListener("click",i._documentClick),i._documentHaveListener=!1,i._close())},i._currentRoot=i.data.getRoot(),i._factory=p.createFactory(h.ItemType.menuItem),i._init(),i._initHandlers(),i._initEvents(),i}return i(e,t),e.prototype.paint=function(){t.prototype.paint.call(this),this._vpopups.redraw()},e.prototype.disable=function(t){this._setProp(t,"$disabled",!0)},e.prototype.enable=function(t){this._setProp(t,"$disabled",!1)},e.prototype.show=function(t){this._setProp(t,"$hidden",!1)},e.prototype.hide=function(t){this._setProp(t,"$hidden",!0)},e.prototype.destructor=function(){l.keyManager.removeHotKey(null,this)},e.prototype._close=function(){this.config.navigationType===h.NavigationType.click&&(this._isActive=!1),clearTimeout(this._currentTimeout),this._activeMenu=null,this.paint()},e.prototype._init=function(){var t=this;this._vpopups=a.create({render:function(){return a.el("div",o({dhx_widget_id:t._uid,class:"menu-popups"+(t._isContextMenu?" context-menu":"")},t._handlers),t._drawPopups())}}),this._vpopups.mount(document.body)},e.prototype._initHandlers=function(){var t=this;this._isActive=this.config.navigationType!==h.NavigationType.click,this._handlers={onmousemove:function(e){if(t._isActive){var n=u.locateNode(e);if(n){var i=n.getAttribute("dhx_id");if(t._activeMenu!==i){if(t._activeMenu=i,t.data.haveChilds(i)){var o=f.getRealPosition(n);t.data.update(i,{$position:o},!1)}t._activeItemChange(i)}}else t._activeItemChange(null)}},onmouseleave:function(){t.config.navigationType!==h.NavigationType.click&&t._activeItemChange(null)},onclick:function(e){var n=u.locateNode(e);if(n){var i=n.getAttribute("dhx_id"),o=t.data.getItem(i);switch(o.type){case h.ItemType.selectButton:case h.ItemType.menuItem:if(i===t._currentRoot)return void t._close();if(t._isActive||(t._isActive=!0),t._setRoot(i),t._activeMenu=i,t.data.haveChilds(i)){var r=f.getRealPosition(n);t.data.update(i,{$position:r},!1),t._activeItemChange(i)}else t._onMenuItemClick(i,e);break;case h.ItemType.dhxButton:case h.ItemType.imageButtonText:case h.ItemType.iconButton:case h.ItemType.imageButton:case h.ItemType.button:case h.ItemType.customHTMLButton:o.twoState&&t.data.update(o.id,{active:!o.active}),t.events.fire(h.ToolbarEvents.click,[i,e]);case h.ItemType.separator:case h.ItemType.input:case h.ItemType.text:case h.ItemType.spacer:t._close();default:return}}}}},e.prototype._initEvents=function(){var t=this,e=null;this.data.events.on(h.DataEvents.change,function(){t.paint(),e&&clearTimeout(e),e=setTimeout(function(){t._normalizeData(),t._resetHotkeys(),e=null,t.paint()},100)}),this.events.on(h.ToolbarEvents.click,function(e){var n=t.data.getItem(e),i=t.data.getItem(n.parent);if(i&&i.type===h.ItemType.selectButton&&t.data.update(n.parent,{value:n.value,icon:n.icon}),n.group){var o=t._groups[n.group];o.active&&t.data.update(o.active,{active:!1}),o.active=n.id,t.data.update(n.id,{active:!0})}})},e.prototype._drawPopups=function(){var t=this,e=this._activeMenu;if(!this._isContextMenu&&!e)return null;var n=this._currentRoot;return this._isContextMenu&&!this._activePosition?null:this._getParents(e,n).map(function(e){if(!t.data.haveChilds(e))return null;var i=t.data.getItem(e)||{},o=0,r=0;t.data.eachChild(e,function(t){t.$hidden||("separator"===t.type||t.separator?r++:o++)},!1);var s=i.width||t.config.popupWidth,l=t._isContextMenu&&t._activePosition&&e===n?t._activePosition:i.$position,u=t._getMode(i,n,l===t._activePosition),c=(l.bottom-l.top)*o+5*r;return a.el("div",{class:"dhx_widget menu-popup",style:f.calculatePosition(l,{mode:u,width:s,height:c})},t._drawMenuItems(e))}).reverse()},e.prototype._onMenuItemClick=function(t,e){this.data.getItem(t).$disabled||(this.events.fire(h.ToolbarEvents.click,[t,e]),this._close())},e.prototype._activeItemChange=function(t){var e=this;t&&!this._documentHaveListener&&this._listenOuterClick(),t&&this.data.haveChilds(t)?(this._activeMenu=t,clearTimeout(this._currentTimeout),this.paint()):(this._activeMenu=t,clearTimeout(this._currentTimeout),this._currentTimeout=setTimeout(function(){return e.paint()},400))},e.prototype._resetHotkeys=function(){var t=this;l.keyManager.removeHotKey(null,this),this.data.map(function(e){e.hotkey&&l.keyManager.addHotKey(e.hotkey,function(){return t._onMenuItemClick(e.id,null)},t)})},e.prototype._listenOuterClick=function(){document.addEventListener("click",this._documentClick),this._documentHaveListener=!0},e.prototype._getMode=function(t,e,n){return void 0===n&&(n=!1),t.parent===e?"bottom":"right"},e.prototype._drawMenuItems=function(t){var e=this;return this.data.map(function(t){return e._factory(t,e.events)},t,!1)},e.prototype._normalizeData=function(){var t=this,e=this.data.getRoot(),n={};this.data.eachChild(e,function(e){t.data.haveChilds(e.id)&&e.parent!==t.data.getRoot()&&(e.$openIcon="right"),e.group&&f.addInGroups(n,e)},!0),this._groups=n},e.prototype._setRoot=function(t){},e.prototype._getParents=function(t,e){var n=[],i=!1,o=this.data.getItem(t),r=o&&o.$disabled;return this.data.eachParent(t,function(t){t.id===e?(n.push(t.id),i=!0):i||n.push(t.id)},!r),this._isContextMenu&&this._activePosition&&n.push(e),n},e.prototype._setProp=function(t,e,n){var i,o=this;Array.isArray(t)?t.forEach(function(t){var i;return o.data.update(t,((i={})[e]=n,i))}):this.data.update(t,((i={})[e]=n,i))},e}(c.View);e.MenuBase=v},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),r=n(31),a=n(35),s=n(11),l=n(7),u=n(6),c=n(3),d=function(){function t(t,e){this._order=[],this._pull={},this._changes={order:[]},this._initOrder=null,this.config=t||{},this._sort=new a.Sort,this._loader=new r.Loader(this,this._changes),this.events=e||new o.EventSystem(this)}return t.prototype.add=function(t,e){this.events.fire(u.DataEvents.beforeAdd,[t])&&(this._addCore(t,e),this._onChange("add",t.id,t),this.events.fire(u.DataEvents.afterAdd,[t]))},t.prototype.remove=function(t){var e=this._pull[t];if(e){if(!this.events.fire(u.DataEvents.beforeRemove,[e]))return;this._removeCore(e.id),this._onChange("remove",t,e)}this.events.fire(u.DataEvents.afterRemove,[e])},t.prototype.removeAll=function(){this._removeAll(),this.events.fire(u.DataEvents.removeAll),this.events.fire(u.DataEvents.change)},t.prototype.exists=function(t){return!!this._pull[t]},t.prototype.getNearId=function(t){if(!this._pull[t])return this._order[0].id||""},t.prototype.getItem=function(t){return this._pull[t]},t.prototype.update=function(t,e,n){var i=this.getItem(t);if(i){if(l.isEqualObj(e,i))return;e.id&&t!==e.id?(l.dhxWarning("this method doesn't allow change id"),l.isDebug()):(c.extend(this._pull[t],e,!1),this.config.update&&this.config.update(this._pull[t]),n||this._onChange("update",t,this._pull[t]))}else l.dhxWarning("item not found")},t.prototype.getIndex=function(t){var e=c.findIndex(this._order,function(e){return e.id===t});return this._pull[t]&&e>=0?e:-1},t.prototype.getId=function(t){if(this._order[t])return this._order[t].id},t.prototype.getLength=function(){return this._order.length},t.prototype.filter=function(t,e){var n=this;if((e=c.extend({add:!1,multiple:!0},e)).add||(this._order=this._initOrder||this._order,this._initOrder=null),this._filters=this._filters||{},e.multiple&&t||(this._filters={}),t){if("function"==typeof t){this._filters._={match:"_",compare:t}}else t.match?(t.compare=t.compare||function(t,e){return t===e},this._filters[t.by]=t):delete this._filters[t.by];var i=this._order.filter(function(t){return Object.keys(n._filters).every(function(e){return t[e]?n._filters[e].compare(t[e],n._filters[e].match,t):n._filters[e].compare(t)})});this._initOrder||(this._initOrder=this._order,this._order=i)}this.events.fire(u.DataEvents.change)},t.prototype.find=function(t){for(var e in this._pull){var n=l.findByConf(this._pull[e],t);if(n)return n}return null},t.prototype.findAll=function(t){var e=[];for(var n in this._pull){var i=l.findByConf(this._pull[n],t);i&&e.push(i)}return e},t.prototype.sort=function(t){this._sort.sort(this._order,t),this._initOrder&&this._initOrder.length&&this._sort.sort(this._initOrder,t),this.events.fire(u.DataEvents.change)},t.prototype.copy=function(t,e,n,o){if(!this.exists(t))return null;var r=c.uid();return n?o?void n.add(i({},this.getItem(t)),e,o):n.exists(t)?(n.add(i({},this.getItem(t),{id:r}),e),r):(n.add(this.getItem(t),e),t):(this.add(i({},this.getItem(t),{id:r}),e),r)},t.prototype.move=function(t,e,n,i){if(n&&n!==this&&this.exists(t)){var o=this.getItem(t);return n.exists(t)&&(o.id=c.uid()),i&&(o.parent=i),n.add(o,e),this.remove(o.id),o.id}if(this.getIndex(t)===e)return null;var r=this._order.splice(this.getIndex(t),1)[0];return-1===e&&(e=this._order.length),this._order.splice(e,0,r),this.events.fire(u.DataEvents.change),t},t.prototype.load=function(t,e){return"string"==typeof t&&(t=new s.DataProxy(t)),this._loader.load(t,e)},t.prototype.parse=function(t,e){return this._removeAll(),this._loader.parse(t,e)},t.prototype.$parse=function(t){var e=this.config.approximate;e&&(t=this._approximate(t,e.value,e.maxNum)),this._parse_data(t),this.events.fire(u.DataEvents.change),this.events.fire(u.DataEvents.load)},t.prototype.save=function(t){this._loader.save(t)},t.prototype.isSaved=function(){return!this._changes.order.length},t.prototype.map=function(t){for(var e=[],n=0;n<this._order.length;n++)e.push(t.call(this,this._order[n],n));return e},t.prototype.reduce=function(t,e){for(var n=0;n<this._order.length;n++)e=t.call(this,e,this._order[n],n);return e},t.prototype.serialize=function(){return this.map(function(t){var e=i({},t);return Object.keys(e).forEach(function(t){"$"===t[0]&&delete e[t]}),e})},t.prototype.getInitialData=function(){return this._initOrder},t.prototype._removeAll=function(){this._pull={},this._order=[],this._changes.order=[],this._initOrder=null},t.prototype._addCore=function(t,e){this.config.init&&(t=this.config.init(t)),t.id=t.id?t.id.toString():c.uid(),this._pull[t.id]&&l.dhxError("Item already exist"),this._initOrder&&this._initOrder.length&&this._addToOrder(this._initOrder,t,e),this._addToOrder(this._order,t,e)},t.prototype._removeCore=function(t){this.getIndex(t)>=0&&(this._order=this._order.filter(function(e){return e.id!==t}),delete this._pull[t]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter(function(e){return e.id!==t}))},t.prototype._parse_data=function(t){var e=this._order.length;this.config.prep&&(t=this.config.prep(t));for(var n=0,i=t;n<i.length;n++){var o=i[n];this.config.init&&(o=this.config.init(o)),o.id=o.id||c.uid(),this._pull[o.id]=o,this._order[e++]=o}},t.prototype._approximate=function(t,e,n){for(var i=t.length,o=e.length,r=Math.floor(i/n),a=Array(Math.ceil(i/r)),s=0,l=0;l<i;l+=r){for(var u=c.copy(t[l]),d=Math.min(i,l+r),f=0;f<o;f++){for(var p=0,h=l;h<d;h++)p+=t[h][e[f]];u[e[f]]=p/(d-l)}a[s++]=u}return a},t.prototype._onChange=function(t,e,n){for(var o=0,r=this._changes.order;o<r.length;o++){var a=r[o];if(a.id===e&&!a.saving)return a.error&&(a.error=!1),a=i({},a,{obj:n,status:t}),void this.events.fire(u.DataEvents.change,[e,t,n])}this._changes.order.push({id:e,status:t,obj:i({},n),saving:!1}),this.events.fire(u.DataEvents.change,[e,t,n])},t.prototype._addToOrder=function(t,e,n){n>=0&&t[n]?(this._pull[e.id]=e,t.splice(n,0,e)):(this._pull[e.id]=e,t.push(e))},t}();e.DataCollection=d},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){void 0===t&&(t={});this.config=i({},{skipHeader:0,nameByHeader:!1,row:"\n",column:","},t),this.config.nameByHeader&&(this.config.skipHeader=1)}return t.prototype.getFields=function(t,e){for(var n=t.trim().split(this.config.column),i={},o=0;o<n.length;o++)i[e?e[o]:o+1]=n[o];return i},t.prototype.getRows=function(t){return t.trim().split(this.config.row)},t.prototype.toJsonArray=function(t){var e=this,n=this.getRows(t),i=this.config.names;if(this.config.skipHeader){var o=n.splice(0,this.config.skipHeader);this.config.nameByHeader&&(i=o[0].trim().split(this.config.column))}return n.map(function(t){return e.getFields(t,i)})},t}();e.CsvDriver=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.toJsonArray=function(t){return this.getRows(t)},t.prototype.getFields=function(t){return t},t.prototype.getRows=function(t){return"string"==typeof t?JSON.parse(t):t},t}();e.JsonDriver=i},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=n(19),s=n(11),l=n(7),u=n(6);function c(t,e,n,i){void 0!==i&&-1!==i&&t[n]&&t[n][i]?t[n].splice(i,0,e):(t[n]||(t[n]=[]),t[n].push(e))}var d=function(t){function e(e,n){var i,o=t.call(this,e,n)||this,a=o._root="_ROOT_"+r.uid();return o._childs=((i={})[a]=[],i),o._initChilds=null,o}return i(e,t),e.prototype.add=function(e,n,i){void 0===n&&(n=-1),void 0===i&&(i=this._root),"object"!=typeof e&&(e={value:e}),e.parent=e.parent?e.parent.toString():i,t.prototype.add.call(this,e,n)},e.prototype.getRoot=function(){return this._root},e.prototype.getParent=function(t,e){if(void 0===e&&(e=!1),!this._pull[t])return null;var n=this._pull[t].parent;return e?this._pull[n]:n},e.prototype.getChilds=function(t){return this._childs&&this._childs[t]?this._childs[t]:[]},e.prototype.getLength=function(t){return void 0===t&&(t=this._root),this._childs[t]?this._childs[t].length:null},e.prototype.removeAll=function(e){var n;if(e)for(var i=0,o=this._childs[e].slice();i<o.length;i++){var r=o[i];this.remove(r.id)}else{t.prototype.removeAll.call(this);var a=this._root;this._initChilds=null,this._childs=((n={})[a]=[],n)}},e.prototype.getIndex=function(t){var e=this.getParent(t);return e&&this._childs[e]?r.findIndex(this._childs[e],function(e){return e.id===t}):-1},e.prototype.sort=function(t){var e=this._childs;for(var n in e)this._sort.sort(e[n],t);this.events.fire(u.DataEvents.change)},e.prototype.map=function(t,e,n){void 0===e&&(e=this._root),void 0===n&&(n=!0);var i=[];if(!this.haveChilds(e))return i;for(var o=0;o<this._childs[e].length;o++)if(i.push(t.call(this,this._childs[e][o],o)),n){var r=this.map(t,this._childs[e][o].id,n);i=i.concat(r)}return i},e.prototype.filter=function(t){if(t){this._initChilds||(this._initChilds=this._childs),t.type=t.type||u.TreeFilterType.all;var e={};this._recursiveFilter(t,this._root,0,e),this._childs=e,this.events.fire(u.DataEvents.change)}else this.restoreOrder()},e.prototype.restoreOrder=function(){this._initChilds&&(this._childs=this._initChilds,this._initChilds=null),this.events.fire(u.DataEvents.change)},e.prototype.copy=function(t,n,i,a){if(void 0===i&&(i=this),void 0===a&&(a=this._root),!this.exists(t))return null;var s=o({},this._childs)[t];if(i===this&&!this.canCopy(t,a))return null;if(i instanceof e){if(this.exists(t)){var l=o({},this.getItem(t));i.exists(t)?l.id=r.uid():l.id=t,l.parent=a,i.add(l,n),t=l.id}if(s)for(var u=0,c=s;u<c.length;u++){var d=c[u].id,f=this.getIndex(d);this.copy(d,f,i,t)}return t}i.add(this._pull[t])},e.prototype.move=function(t,n,i,o){if(void 0===i&&(i=this),void 0===o&&(o=this._root),!this.exists(t))return null;if(i!==this){if(!(i instanceof e))return i.add(this._pull[t]),void this.remove(t);var r=this.copy(t,n,i,o);return this.remove(t),r}if(!this.canCopy(t,o))return null;var a=this.getParent(t),s=this.getIndex(t),l=this._childs[a].splice(s,1)[0];return l.parent=o,this._childs[a].length||delete this._childs[a],this.haveChilds(o)||(this._childs[o]=[]),-1===n?n=this._childs[o].push(l):this._childs[o].splice(n,0,l),this.events.fire(u.DataEvents.change),t},e.prototype.eachChild=function(t,e,n){if(void 0===n&&(n=!0),this.haveChilds(t))for(var i=0;i<this._childs[t].length;i++)e.call(this,this._childs[t][i],i),n&&!1!==this.getItem(this._childs[t][i].id).$opened&&this.eachChild(this._childs[t][i].id,e,n)},e.prototype.getNearId=function(t){return t},e.prototype.loadChilds=function(t,e){var n=this;void 0===e&&(e="json");var i=this.config.autoload+"?id="+t;new s.DataProxy(i).load().then(function(i){i=(e=l.toDataDriver(e)).toJsonArray(i),n._parse_data(i,t),n.events.fire(u.DataEvents.change)})},e.prototype.refreshChilds=function(t,e){void 0===e&&(e="json"),this.removeAll(t),this.loadChilds(t,e)},e.prototype.eachParent=function(t,e,n){void 0===n&&(n=!1);var i=this.getItem(t);if(i&&(n&&e.call(this,i),i.parent!==this._root)){var o=this.getItem(i.parent);e.call(this,o),this.eachParent(i.parent,e)}},e.prototype.haveChilds=function(t){return t in this._childs},e.prototype.canCopy=function(t,e){if(t===e)return!1;var n=!0;return this.eachParent(e,function(e){return e.id===t?n=!1:null}),n},e.prototype.serialize=function(t){return this._serialize(this._root,t)},e.prototype.getId=function(t,e){if(void 0===e&&(e=this._root),this._childs[e]&&this._childs[e][t])return this._childs[e][t].id},e.prototype._removeAll=function(e){var n;if(e)for(var i=0,o=this._childs[e].slice();i<o.length;i++){var r=o[i];this.remove(r.id)}else{t.prototype._removeAll.call(this);var a=this._root;this._initChilds=null,this._childs=((n={})[a]=[],n)}},e.prototype._removeCore=function(t){if(this._pull[t]){var e=this.getParent(t);this._childs[e]=this._childs[e].filter(function(e){return e.id!==t}),e===this._root||this._childs[e].length||delete this._childs[e],this._initChilds&&this._initChilds[e]&&(this._initChilds[e]=this._initChilds[e].filter(function(e){return e.id!==t}),e===this._root||this._initChilds[e].length||delete this._initChilds[e]),this._fastDeleteChilds(this._childs,t),this._initChilds&&this._fastDeleteChilds(this._initChilds,t)}},e.prototype._addToOrder=function(t,e,n){var i=this._childs,o=this._initChilds,r=e.parent;this._pull[e.id]=e,c(i,e,r,n),o&&c(o,e,r,n)},e.prototype._parse_data=function(t,e){void 0===e&&(e=this._root);for(var n=0,i=t;n<i.length;n++){var o=i[n];this.config.init&&(o=this.config.init(o)),"object"!=typeof o&&(o={value:o}),o.id=o.id?o.id.toString():r.uid(),o.parent=o.parent?o.parent.toString():e,this._pull[o.id]=o,this._childs[o.parent]||(this._childs[o.parent]=[]),this._childs[o.parent].push(o),o.childs&&o.childs instanceof Object&&this._parse_data(o.childs,o.id)}},e.prototype._fastDeleteChilds=function(t,e){if(this._pull[e]&&delete this._pull[e],t[e]){for(var n=0;n<t[e].length;n++)this._fastDeleteChilds(t,t[e][n].id);delete t[e]}},e.prototype._recursiveFilter=function(t,e,n,i){var o=this,r=this._childs[e];if(r){var a=function(e){switch(t.type){case u.TreeFilterType.all:return!0;case u.TreeFilterType.specific:return n===t.specific;case u.TreeFilterType.leafs:return!o.haveChilds(e.id)}};if(t.by&&t.match){var s=function(e){return!a(e)||-1!==e[t.by].toString().toLowerCase().indexOf(t.match.toString().toLowerCase())};i[e]=r.filter(s)}else if(t.rule&&"function"==typeof t.rule){s=function(e){return!a(e)||t.rule(e)};var l=r.filter(s);l.length&&(i[e]=l)}for(var c=0,d=r;c<d.length;c++){var f=d[c];this._recursiveFilter(t,f.id,n+1,i)}}},e.prototype._serialize=function(t,e){var n=this;return void 0===t&&(t=this._root),this.map(function(t){var i={};for(var o in t)"parent"!==o&&"childs"!==o&&(i[o]=t[o]);return e&&(i=e(i)),n.haveChilds(t.id)&&(i.childs=n._serialize(t.id,e)),i},t,!1)},e}(a.DataCollection);e.TreeCollection=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(25);!function(t){t.right="right",t.bottom="bottom",t.center="center"}(e.Position||(e.Position={}));var r=new WeakMap,a=[],s=document.createElement("div");function l(t,e){e&&clearTimeout(r.get(t));var n=a.indexOf(t);n<0?document.body.removeChild(t):(s.removeChild(t),a.splice(n,1),0===a.length&&document.body.removeChild(s))}s.className="dhx-message-container",e.message=function(t){"string"==typeof t&&(t={text:t});var e=document.createElement("div");if(e.className="dhx-message "+(t.css||""),e.innerHTML='<span class="message-text">'+t.text+'</span> <div class="dxi '+t.icon+'"></div>',t.at){e.style.position="absolute";var n=t.at,u=n.node,c=n.position,d=i.toNode(u).getBoundingClientRect();document.body.appendChild(e);var f=e.getBoundingClientRect(),p=f.width,h=f.height,v=o.findPosition(d,c,p,h),_=v.left,g=v.top,y=v.pos;e.className+=" "+y,e.style.left=_+"px",e.style.top=g+"px"}else 0===a.length&&document.body.appendChild(s),a.push(e),s.appendChild(e);if(t.expire){var m=setTimeout(function(){return l(e)},t.expire);r.set(e,m)}e.onclick=function(){return l(e,!0)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(1),r=n(24);function a(t,e,n,o){var a,s,l;switch(e){case r.Position.center:return(s=t.left+window.pageXOffset+(t.width-n)/2)+8<window.pageXOffset&&(s=t.left+window.pageXOffset),{left:s,top:l=t.top+window.pageYOffset+(t.height-o)/2,pos:a=i.center};case r.Position.right:return a=i.right,(s=t.right+window.pageXOffset)+n+8>window.innerWidth+window.pageXOffset&&(s=window.pageXOffset+t.left-n,a=i.left),{left:s,top:l=window.pageYOffset+t.top+(t.height-o)/2,pos:a};case r.Position.bottom:return(s=window.pageXOffset+t.left+(t.width-n)/2)<window.pageXOffset&&(s=window.pageXOffset+t.left),a=i.bottom,(l=window.pageYOffset+t.bottom)+o+8>window.innerHeight+window.pageYOffset&&(l=window.pageYOffset+t.top-o,a=i.top),{left:s,top:l,pos:a}}}!function(t){t.left="left",t.right="right",t.top="top",t.bottom="bottom",t.center="center"}(i=e.RealPosition||(e.RealPosition={})),e.findPosition=a;var s=document.createElement("div"),l=document.createElement("span");l.className="tooltip-text",s.appendChild(l),s.style.position="absolute";var u=null,c=null,d=!1,f=null;function p(t,e,n,o,r){void 0===r&&(r=!1);var u=t.getBoundingClientRect();l.textContent=e,document.body.appendChild(s),s.className="dhx-tooltip"+(r?" forced":"");var c=s.getBoundingClientRect(),f=a(u,n,c.width,c.height),p=f.left,h=f.top,v=f.pos;switch(v){case i.bottom:case i.top:case i.left:case i.right:case i.center:s.style.left=p+"px",s.style.top=h+"px"}s.className+=" "+v+" "+(o||""),d=!0,r||setTimeout(function(){s.className+=" animate-tooltip"})}function h(t,e,n,i,o){void 0===o&&(o=!1);var r=function(){d||(u&&clearTimeout(u),u=setTimeout(function(){p(t,e,n,i)},750))},a=function(){d&&c&&(f=setTimeout(function(){document.body.removeChild(s),d=!1,f=null},200)),clearTimeout(u),o||document.removeEventListener("mousemove",r),document.removeEventListener("mouseout",a),document.removeEventListener("click",a),c=null};o?p(t,e,n,i,o):document.addEventListener("mousemove",r),document.addEventListener("mouseout",a),document.addEventListener("click",a)}function v(t,e){var n=o.toNode(e.node);n!==c&&(c=n,f?(clearTimeout(f),f=null,h(n,t,e.position,e.css,!0)):h(n,t,e.position||r.Position.bottom,e.css))}function _(t){var e=o.locateNode(t,"dhx_tooltip_text");e&&v(e.getAttribute("dhx_tooltip_text"),{position:e.getAttribute("dhx_tooltip_position")||r.Position.bottom,node:e})}e.tooltip=v,e.enableTooltip=function(){document.addEventListener("mousemove",_)},e.disableTooltip=function(){document.removeEventListener("mousemove",_)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),r=n(0),a=n(1),s=n(16),l=n(4),u=n(13),c=n(17),d=function(t){function e(e,n){var i=t.call(this,e,o.extend({navigationType:"click"},n))||this;i._currentRoot=null,i._factory=c.createFactory(l.ItemType.button);return i.mount(e,r.create({render:function(){return i._draw()}})),i}return i(e,t),e.prototype.getValues=function(){var t={};for(var e in this.data.eachChild(this.data.getRoot(),function(e){e.twoState?t[e.id]=e.active:e.type===l.ItemType.input&&(t[e.id]=e.value)},!1),this._groups)this._groups[e].active&&(t[e]=this._groups[e].active);return t},e.prototype.setValues=function(t){for(var e in t){if(this._groups[e])this._groups[e].active&&(this.data.update(this._groups[e].active,{active:!1}),this._groups[e].active=t[e],this.data.update(t[e],{active:!0}));else this.data.getItem(e).type===l.ItemType.input?this.data.update(e,{value:t[e]}):this.data.update(e,{active:t[e]})}},e.prototype._initHandlers=function(){var e=this;t.prototype._initHandlers.call(this),this._onInput=function(t){var n=a.locate(t);e.data.update(n,{value:t.target.value})},this._showTooltip=function(t){var n=a.locateNode(t);if(n){var i=n.getAttribute("dhx_id"),o=e.data.getItem(i);o.tooltip&&s.tooltip(o.tooltip,{node:n,position:s.Position.bottom})}}},e.prototype._draw=function(){var t=this;return r.el(".toolbar.dhx_widget"+(this.config.css?"."+this.config.css:""),{dhx_widget_id:this._uid,onclick:this._handlers.onclick,oninput:this._onInput,onmouseover:this._showTooltip},this.data.map(function(e){return t._factory(e,t.events)},this.data.getRoot(),!1))},e.prototype._getMode=function(t,e){return t.id===e?"bottom":"right"},e.prototype._close=function(){this._activeMenu=null,this._activePosition=null,this._currentRoot=null,this.paint()},e.prototype._normalizeData=function(){var t=this,e=this.data.getRoot(),n={};this.data.eachChild(e,function(i){i.type!==l.ItemType.menuItem&&i.type!==l.ItemType.selectButton||t.data.haveChilds(i.id)&&(t.data.eachChild(i.id,function(t){return t.type=t.type||l.ItemType.menuItem},!1),i.parent!==e?i.$openIcon="right":i.$openIcon="bot"),i.group&&u.addInGroups(n,i)},!0),this._groups=n},e.prototype._setRoot=function(t){this.data.getParent(t)===this.data.getRoot()&&(this._currentRoot=t)},e}(n(18).MenuBase);e.Toolbar=d},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),n(28);var o=n(8);e.DataCollection=o.DataCollection;var r=n(16);e.message=r.message,i(n(42)),i(n(15));var a=n(14);e.i18n={},e.i18n.setLocale=function(t,n){var i=e.i18n[t];for(var o in n)i[o]=n[o]},e.i18n.vault=e.i18n.vault||a.default},function(t,e,n){},,,function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=function(){function e(t,e){this._parent=t,this._changes=e}return e.prototype.load=function(t,e){var n=this;return this._parent.loadData=t.load().then(function(t){n._parent.removeAll(),n.parse(t,e)})},e.prototype.parse=function(t,e){void 0===e&&(e="json"),t=(e=i.toDataDriver(e)).toJsonArray(t),this._parent.$parse(t)},e.prototype.save=function(e){for(var n=this,o=function(o){if(o.saving||o.pending)i.dhxWarning("item is saving");else{var a=r._findPrevState(o.id);if(a&&a.saving){var s=new t(function(t,r){a.promise.then(function(){o.pending=!1,t(n._setPromise(o,e))}).catch(function(t){n._removeFromOrder(a),n._setPromise(o,e),i.dhxWarning(t),r(t)})});r._addToChain(s),o.pending=!0}else r._setPromise(o,e)}},r=this,a=0,s=this._changes.order;a<s.length;a++){o(s[a])}this._parent.saveData.then(function(){n._saving=!1})},e.prototype._setPromise=function(t,e){var n=this;return t.promise=e.save(t.obj,t.status),t.promise.then(function(){n._removeFromOrder(t)}).catch(function(e){t.saving=!1,t.error=!0,i.dhxError(e)}),t.saving=!0,this._saving=!0,this._addToChain(t.promise),t.promise},e.prototype._addToChain=function(t){this._parent.saveData&&this._saving?this._parent.saveData=this._parent.saveData.then(function(){return t}):this._parent.saveData=t},e.prototype._findPrevState=function(t){for(var e=0,n=this._changes.order;e<n.length;e++){var i=n[e];if(i.id===t)return i}return null},e.prototype._removeFromOrder=function(t){this._changes.order=this._changes.order.filter(function(e){return!i.isEqualObj(e,t)})},e}();e.Loader=o}).call(this,n(10))},function(t,e,n){var i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(33),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,o=1,r={},a=!1,s=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){c(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&c(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),i=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){c(t.data)},i=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;i=function(e){var n=s.createElement("script");n.onreadystatechange=function(){c(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():i=function(t){setTimeout(c,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};return r[o]=a,i(o),o++},l.clearImmediate=u}function u(t){delete r[t]}function c(t){if(a)setTimeout(c,0,t);else{var e=r[t];if(e){a=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{u(t),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(20),n(34))},function(t,e){var n,i,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,u=[],c=!1,d=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&p())}function p(){if(!c){var t=s(f);c=!0;for(var e=u.length;e;){for(l=u,u=[];++d<e;)l&&l[d].run();d=-1,e=u.length}l=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||c||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=function(){function t(){}return t.prototype.sort=function(t,e){var n=this;e.rule&&"function"==typeof e.rule?this._sort(t,e):e.by&&(e.rule=function(t,o){var r=n._checkVal(e.as,t[e.by]),a=n._checkVal(e.as,o[e.by]);return i.naturalCompare(r.toString(),a.toString())},this._sort(t,e))},t.prototype._checkVal=function(t,e){return t?t.call(this,e):e},t.prototype._sort=function(t,e){var n=this,i={asc:1,desc:-1};return t.sort(function(t,o){return e.rule.call(n,t,o)*(i[e.dir]||i.asc)})},t}();e.Sort=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(1),r=n(5),a=n(38),s=n(23),l=n(6);function u(t){var e=t.y,n=function(t){for(t instanceof Event&&(t=t.target);t&&t.getAttribute;){if(t.getAttribute("dhx_id"))return t;t=t.parentNode}}(t);if(!n)return null;var i=n.childNodes[0].getBoundingClientRect();return(e-i.top)/i.height}!function(t){t[t.top=0]="top",t[t.bot=1]="bot",t[t.in=2]="in"}(i||(i={}));var c=function(){function t(){var t=this;this._transferData={},this._canMove=!0,this._ghostTopPadding=-17,this._onMouseMove=function(e){if(t._transferData.id){var n=e.pageX,i=e.pageY;if(!t._transferData.ghost){if(Math.abs(t._transferData.x-n)<3&&Math.abs(t._transferData.y-i)<3)return;var o=t._onDragStart(t._transferData.id,t._transferData.targetId);if(!o)return void t._endDrop();t._transferData.ghost=o,document.body.appendChild(t._transferData.ghost)}t._moveGhost(n,i),t._onDrag(e)}},this._onMouseUp=function(){t._transferData.x&&(t._transferData.ghost?(t._removeGhost(),t._onDrop()):t._endDrop(),document.removeEventListener("mousemove",t._onMouseMove),document.removeEventListener("mouseup",t._onMouseUp))}}return t.prototype.setItem=function(t,e,n){a.collectionStore.setItem(t,e,n)},t.prototype.onMouseDown=function(t){if(1===t.which){document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp);var e=o.locate(t,"dhx_id"),n=o.locate(t,"dhx_collection_id");e&&n&&(this._transferData.x=t.x,this._transferData.y=t.y,this._transferData.targetId=n,this._transferData.id=e)}},t.prototype._moveGhost=function(t,e){if(this._transferData.ghost){var n=this._transferData.ghost.offsetWidth/2;this._transferData.ghost.style.left=t-n+"px",this._transferData.ghost.style.top=e+this._ghostTopPadding+"px"}},t.prototype._removeGhost=function(){document.body.removeChild(this._transferData.ghost)},t.prototype._onDrop=function(){if(this._canMove){var t=a.collectionStore.getItem(this._lastCollectionId),e=a.collectionStore.getItemConfig(this._lastCollectionId);if(t&&e.mode!==l.DragMode.source){var n={id:this._lastId,target:t},i={id:this._transferData.id,target:this._transferData.target};i.target.events.fire(r.DragEvents.beforeDrop,[i,n])&&(this._move(i,n),n.target.events.fire(r.DragEvents.dropComplete,[n.id,this._transferData.dropPosition])),this._endDrop()}else this._endDrop()}else this._endDrop()},t.prototype._onDragStart=function(t,e){var n=a.collectionStore.getItem(e),i=a.collectionStore.getItemConfig(e);if(i.dragMode===l.DragMode.target)return null;var o=n.data.getItem(t);n.events.fire(r.DragEvents.dragStart);var s=function(t){var e=document.createElement("div");return e.textContent=t.value||t.text,e.className="drag-ghost",e}(o);return n.events.fire(r.DragEvents.beforeDrag,[o,s])&&t?(this._toggleTextSelection(!0),this._transferData.target=n,this._transferData.dragConfig=i,s):null},t.prototype._onDrag=function(t){var e=t.x,n=t.y,c=document.elementFromPoint(e,n),d=o.locate(c,"dhx_id");if(d){var f,p,h=o.locate(c,"dhx_collection_id");if(this._transferData.dragConfig.behaviour===l.DragBehaviour.complex){var v=u(t);this._transferData.dropPosition=v<=.25?i.top:v>=.75?i.bot:i.in}else if(this._lastId===d&&this._lastCollectionId===h)return;if(d&&h||!this._canMove)if(f=[p={id:this._transferData.id,target:this._transferData.target},{id:d,target:a.collectionStore.getItem(h)}],p.target.events.fire(r.DragEvents.dragOut,f),h!==this._transferData.targetId||!(p.target.data instanceof s.TreeCollection)||p.target.data instanceof s.TreeCollection&&p.target.data.canCopy(p.id,d))this._cancelCanDrop(),this._lastId=d,this._lastCollectionId=h,f.push(this._transferData.dropPosition),p.target.events.fire(r.DragEvents.dragIn,f)&&this._canDrop();else this._cancelCanDrop();else this._cancelCanDrop()}else this._cancelCanDrop()},t.prototype._move=function(t,e){var n=t.target.data,o=e.target.data,r=0,a=e.id;switch(this._transferData.dragConfig.behaviour){case l.DragBehaviour.child:break;case l.DragBehaviour.sibling:a=o.getParent(a),r=o.getIndex(e.id)+1;break;case l.DragBehaviour.complex:var s=this._transferData.dropPosition;s===i.top?(a=o.getParent(a),r=o.getIndex(e.id)):s===i.bot&&(a=o.getParent(a),r=o.getIndex(e.id)+1)}this._transferData.dragConfig.copy?n.copy(t.id,r,o,a):n.move(t.id,r,o,a)},t.prototype._endDrop=function(){this._toggleTextSelection(!1),this._transferData.target&&this._transferData.target.events.fire(r.DragEvents.dragEnd),this._cancelCanDrop(),this._canMove=!0,this._transferData={},this._lastId=null,this._lastCollectionId=null},t.prototype._cancelCanDrop=function(){this._canMove=!1;var t=a.collectionStore.getItem(this._lastCollectionId);t&&this._lastId&&t.events.fire(r.DragEvents.cancelDrop,[this._lastId])},t.prototype._canDrop=function(){this._canMove=!0;var t=a.collectionStore.getItem(this._lastCollectionId);t&&this._lastId&&t.events.fire(r.DragEvents.canDrop,[this._lastId,this._transferData.dropPosition])},t.prototype._toggleTextSelection=function(t){t?document.body.classList.add("dhx-no-select"):document.body.classList.remove("dhx-no-select")},t}();e.dragManager=new c},function(t,e){if(Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this._store={}}return t.prototype.setItem=function(t,e,n){this._store[t]={target:e,config:n}},t.prototype.getItem=function(t){return this._store[t]?this._store[t].target:null},t.prototype.getItemConfig=function(t){return this._store[t]?this._store[t].config:null},t}();e.collectionStore=new i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),o=n(5),r=n(6),a=function(){function t(t,e,n){var o=this;this.events=n||new i.EventSystem,this._data=e,this._data.events.on(r.DataEvents.removeAll,function(){o._selected=null}),this._data.events.on(r.DataEvents.change,function(){if(o._selected){var t=o._data.getNearId(o._selected);t!==o._selected&&(o._selected=null,t&&o.add(t))}})}return t.prototype.getId=function(){return this._selected},t.prototype.getItem=function(){return this._selected?this._data.getItem(this._selected):null},t.prototype.remove=function(t){return!(t=t||this._selected)||!!this.events.fire(o.SelectionEvents.beforeUnSelect,[t])&&(this._data.update(t,{$selected:!1}),this._selected=null,this.events.fire(o.SelectionEvents.afterUnSelect,[t]),!0)},t.prototype.add=function(t){this._selected!==t&&(this.remove(),this.events.fire(o.SelectionEvents.beforeSelect,[t])&&(this._selected=t,this._data.update(t,{$selected:!0}),this.events.fire(o.SelectionEvents.afterSelect,[t])))},t}();e.Selection=a},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=n(41);function o(t){var e=document.activeElement;e.classList.contains("apply-button")||e.classList.contains("reject-button")||t.preventDefault()}function r(t){var e=document.createElement("div");return e.className="dhx-blocker "+(t||""),document.body.appendChild(e),document.addEventListener("keydown",o),function(){document.body.removeChild(e),document.removeEventListener("keydown",o)}}e.blockScreen=r,e.alert=function(e){var n=e.buttons&&e.buttons[0]?e.buttons[0]:i.default.apply,o=r(e.blockerCss);return new t(function(t){var i=document.createElement("div");i.className="dhx-alert "+(e.css||""),i.innerHTML='\n\t\t\t<div class="message-box-header">\n\t\t\t\t<div class="mesage-box-title">'+e.header+'</div>\n\t\t\t</div>\n\t\t\t<div class="alert-message">'+e.text+'</div>\n\t\t\t<div class="action-button '+(e.buttonsAlignment?e.buttonsAlignment:"")+'">\n\t\t\t\t<button class="apply-button alert-btn dhx_btn dhx_btn--flat">'+n+"</button>\n\t\t\t</div>",document.body.appendChild(i),i.querySelector(".apply-button").focus(),i.querySelector("button").addEventListener("click",function(){o(),document.body.removeChild(i),t(!0)})})},e.confirm=function(e){var n=e.buttons&&e.buttons[1]?e.buttons[1]:i.default.apply,o=e.buttons&&e.buttons[0]?e.buttons[0]:i.default.reject,a=r(e.blockerCss);return new t(function(t){var i=document.createElement("div");i.className="dhx-confirm "+(e.css||""),i.innerHTML='\n\t\t\t<div class="message-box-header">\n\t\t\t\t<div class="mesage-box-title">'+e.header+'</div>\n\t\t\t</div>\n\t\t\t<div class="confirm-message">'+e.text+'</div>\n\t\t\t<div class="action-button '+(e.buttonsAlignment?e.buttonsAlignment:"")+'">\n\t\t\t\t<button class="reject-button dhx_btn dhx_btn--link">'+o+'</button>\n\t\t\t\t<button class="apply-button dhx_btn dhx_btn--flat">'+n+"</button>\n\t\t\t</div>",document.body.appendChild(i),i.querySelector(".reject-button").focus();var r=function(e){"BUTTON"===e.target.tagName&&function(e){a(),i.removeEventListener("click",r),document.body.removeChild(i),t(e)}(e.target.classList.contains("apply-button"))};i.addEventListener("click",r)})}}).call(this,n(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={apply:"apply",reject:"reject"}},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=n(0),s=n(9),l=n(1),u=n(44),c=n(12),d=n(8),f=n(45),p=n(16),h=n(48),v=n(14),_=n(15),g=n(64),y=n(65),m=n(66),b=n(67),w=n(68),x=function(t){function e(e,n){void 0===n&&(n={});var i=t.call(this,null,r.extend({mode:_.VaultMode.list,toolbar:!0,updateFromResponse:!0,scaleFactor:4,customScroll:!0,uploader:{},progressBar:{}},n))||this;return i.config.toolbar||(i.config.uploader.autosend=!0),n.data?(i.data=n.data,i.events=n.data.events,i.events.context=i):(i.events=new s.EventSystem(i),i.data=new d.DataCollection({},i.events)),i.data.config.init=function(t){return t.status=t.status||_.FileStatus.uploaded,t.file?(t.size=t.file.size,t.name=t.file.name):(t.size=t.size||0,t.name=t.name||""),i.config.mode===_.VaultMode.grid&&t.file&&m.isImage(t)&&i._readStack.add(t,i.uploader.config.autosend),t},i._readStack=new w.ReadStackPreview(i.data),i.uploader=new g.Uploader(i.config.uploader,i.data,i.events),i._scrollView=new u.ScrollView(function(){return i.getRootView()}),i._progressBar=new b.ProgressBar(i.events,i.config.progressBar),i.events.on(_.UploaderEvents.uploadProgress,function(t,e,n){return i._progressBar.setState(t,{current:e,total:n})}),i._initHandlers(),i._initUI(e),i._initEvents(),i}return i(e,t),e.prototype.destructor=function(){this.toolbar.destructor(),this._readStack.stop(),this.uploader.unlinkDropArea(),this.uploader.abort()},e.prototype._initUI=function(t){var e=this,n=this.config.toolbar?y.layoutConfig:y.layoutConfigWithoutTopbar;n.on=this._getDragEvents();var i=this._layout=new f.Layout(t,n),o=this.toolbar=new h.Toolbar(null,{css:"vault-toolbar"}),r=[{id:"add",tooltip:v.default.add,type:h.ItemType.iconButton,icon:"dxi-plus"},{id:"upload",tooltip:v.default.upload,type:h.ItemType.iconButton,icon:"dxi icon-upload"},{type:"spacer"},{id:"remove-all",tooltip:v.default.clearAll,type:h.ItemType.iconButton,icon:"dxi-delete-forever"}];this.toolbar.data.parse(r),this._hideUploadAndDeleteButtons();this.mount(null,a.create({render:function(){return e._draw()}})),this.config.toolbar&&i.cell("topbar").attach(o),i.cell("vault").attach(this)},e.prototype._initHandlers=function(){var t=this;this._handlers={onclick:{".action-add":function(){return t.uploader.selectFile()},".action-remove-file":function(e){var n=l.locate(e);n&&(t.data.update(n,{$toRemove:!0}),setTimeout(function(){t.data.update(n,{$toRemove:!1},!0),t.data.remove(n)},200))}},onmouseover:{".action-download":function(t){p.tooltip(v.default.download,{node:t.target,position:p.Position.bottom})},".action-remove-file":function(t){p.tooltip(v.default.clear,{node:t.target,position:p.Position.bottom})},".title-content, .dhx-file-name":function(e){var n=l.locate(e),i=t.data.getItem(n);p.tooltip(i.name,{node:e.target,position:p.Position.bottom,css:"tooltip-light"})}}}},e.prototype._getDragEvents=function(){var t=this,e={left:null,top:null,width:null,height:null};return{dragleave:function(n){t._canDrop&&(n.pageX>e.left+e.width-1||n.pageX<e.left||n.pageY>e.top+e.height-1||n.pageY<e.top)&&(t._canDrop=!1,t.config.toolbar&&t._layout.cell("topbar").show(),t._layout.config.css="vault-layout",t._layout.paint())},dragenter:function(n){if(n.preventDefault(),!t.uploader.isActive&&!t._canDrop){for(var i=0,o=n.dataTransfer.types;i<o.length;i++){var r=o[i];if("Files"!==r&&"application/x-moz-file"!==r)return void(t._canDrop=!1)}t._canDrop=!0;var a=t._layout.getRootView().node.el.getBoundingClientRect();e.left=a.left+window.pageXOffset,e.top=a.top+window.pageYOffset,e.width=a.width,e.height=a.height,t._canDrop=!0,t.config.toolbar&&t._layout.cell("topbar").hide(),t._layout.config.css="vault-layout dhx-dragin",t._layout.paint()}},dragover:function(t){t.preventDefault()},drop:function(e){if(e.preventDefault(),t._canDrop){var n=e.dataTransfer;t.uploader.parseFiles(n),t._canDrop=!1,t.config.toolbar&&t._layout.cell("topbar").show(),t._layout.config.css="vault-layout",t._layout.paint()}}}},e.prototype._hideUploadAndDeleteButtons=function(){this.toolbar.hide(["upload","remove-all"])},e.prototype._showUploadAndDeleteButtons=function(){this.uploader.config.autosend?this.toolbar.show("remove-all"):this.toolbar.show(["upload","remove-all"])},e.prototype._initEvents=function(){var t=this;this.data.events.on(_.DataEvents.change,function(){t.data.getLength()?t._showUploadAndDeleteButtons():t._hideUploadAndDeleteButtons(),t.paint()}),this.events.on(_.UploaderEvents.uploadBegin,function(){t.config.toolbar&&t._layout.cell("topbar").attach(t._progressBar)}),this.events.on(_.UploaderEvents.uploadComplete,function(){t.config.mode===_.VaultMode.grid&&t.uploader.config.autosend&&t._readStack.read(),t.config.toolbar&&t._layout.cell("topbar").attach(t.toolbar)}),this.toolbar.events.on(h.ToolbarEvents.click,function(e){switch(e){case"add":t.uploader.selectFile();break;case"remove-all":t.data.removeAll();break;case"upload":t.uploader.send()}}),this.events.on(_.ProgressBarEvents.cancel,function(){t.uploader.abort(),t.paint()})},e.prototype._draw=function(){var t=!this.data.getLength(),e=this.config.mode===_.VaultMode.grid?this._drawGrid():this._drawList();return a.el("div",o({class:"vault dhx_widget"+(this._canDrop?" drop-here":"")},this._handlers,{dhx_widget_id:this._uid}),[this._canDrop||t?this._drawDropableArea():this.config.customScroll?this._scrollView.render(e):e])},e.prototype._getFileActions=function(t){var e=[],n=[],i=[a.el(".dhx-default-actions",e),a.el(".dhx-hover-actions",n)];if(t.status===_.FileStatus.inprogress)return i;if(t.status!==_.FileStatus.failed&&t.link){var o=(this.config.downloadURL||"")+t.link,r=o.split("/").pop().split("?")[0],s=a.el("a",{download:r,class:"download-link",href:o},[a.el(".icon-btn.dxi.dxi-download.action-download")]);n.push(s)}var l=a.el(".icon-btn.dxi.dxi-delete-forever.action-remove-file");if(n.push(l),t.status===_.FileStatus.failed){var u=a.el(".dxi.dxi-alert-circle.warning-status");e.push(u)}if(t.status===_.FileStatus.uploaded){var c=a.el(".dxi.dxi-checkbox-marked-circle.uploaded-status");e.push(c)}return i},e.prototype._drawList=function(){var t=this;return a.el(".dhx-files-block.dhx-webkit-scroll",this.data.map(function(e){var n=e.status===_.FileStatus.failed&&e.request,i=e.status===_.FileStatus.inprogress,o=e.status===_.FileStatus.queue,r=e.status!==_.FileStatus.uploaded;return a.el("div",{class:"dhx-file-item"+(e.$toRemove?" to-remove":"")+(o?" in-queue":""),dhx_id:e.id,_key:e.id},[a.el(".dhx-file-icon",[a.el("div",{class:"dhx-file-type "+m.getFileClassName(e)+(r?" not-loaded":"")})]),a.el(".dhx-file-title",[a.el(".dhx-title-content",e.name),a.el(".dhx-file-info",[n&&a.el(".warn-message",e.request.statusText||v.default.error),i?a.el(".progress-value",(100*e.progress).toFixed(1)+"%"):a.el(".dhx-size"+(n?".dhx-size-error":""),m.getBasis(e.size))])]),i&&a.el(".dhx-download-progress",{style:{width:(100*e.progress).toFixed(1)+"%"}}),!i&&a.el(".dhx-file-action",t._getFileActions(e))])}))},e.prototype._drawDropableArea=function(){return a.el(".dhx-dropable-area.drop-files-here",[a.el(".dhx-big-icon-block",[a.el(".dxi.icon-upload")]),!this._canDrop&&a.el(".drop-area-bold-text",v.default.dragAndDrop),!this._canDrop&&a.el(".drop-area-bold-text",v.default.filesOrFoldersHere),!this._canDrop&&a.el(".drop-area-light-text",v.default.or),!this._canDrop&&a.el("button.dhx_btn.dhx_btn--flat.dhx_btn--small.action-add",v.default.browse)])},e.prototype._drawGrid=function(){var t=this;return a.el("div",{class:"dhx-files-grid dhx-webkit-scroll"},[a.el(".dhx-grid-content",this.data.map(function(e){var n=e.status===_.FileStatus.inprogress,i=e.status===_.FileStatus.queue,o=e.status===_.FileStatus.failed;return a.el("div",{class:"dhx-file-grid-item"+(n?" in-progress":"")+(e.$toRemove?" to-remove":"")+(i?" in-queue":"")+(o?" failed":""),dhx_id:e.id,_key:e.id},[a.el(".dhx-preview-wrapper",[e.preview?a.el(".dhx-server-file-preview",[a.el("img",{src:e.preview})]):e.image?a.el("canvas",{width:98*t.config.scaleFactor,height:98*t.config.scaleFactor,_hooks:{didInsert:function(n){var i=m.calculateCover(e.image),o=i.dx,r=i.dy,a=i.sx,s=i.sy,l=i.sHeight,u=i.sWidth;n.el.getContext("2d").drawImage(e.image,a,s,u,l,o,r,98*t.config.scaleFactor,98*t.config.scaleFactor)}}}):a.el("div",{class:"dhx-file-preview dhx-file-type "+m.getFileClassName(e)}),n&&t._drawCircle(e.progress)].concat(t._getFileActions(e),[a.el(".dhx-file-info",[o&&a.el(".warn-message",e.request.statusText||v.default.error),!n&&a.el(".dhx-size"+(o?".dhx-size-error":""),m.getBasis(e.size))])])),a.el(".dhx-file-name",m.truncateWord(e.name))])}))])},e.prototype._drawCircle=function(t){return a.el(".progress-layout",[a.el(".progress-amount",(100*t).toFixed(1)+"%"),a.sv("svg",{xmlns:"http://www.w3.org/2000/svg",class:"progress-circle",viewBox:"0 0 60 60"},[a.sv("circle",{cx:30,cy:30,r:28,"stroke-width":4,class:"progress-bar-background"}),a.sv("circle.active-circle",{cx:30,cy:30,r:28,"stroke-width":4,"stroke-dasharray":"175.9 175.9","stroke-dashoffset":175.9*(1-t),class:"progress-bar-active"})])])},e}(c.View);e.Vault=x},function(t,e,n){
/**
* Copyright (c) 2017, Leon Sorokin
* All rights reserved. (MIT Licensed)
*
* domvm.js (DOM ViewModel)
* A thin, fast, dependency-free vdom view layer
* @preserve https://github.com/leeoniya/domvm (v3.2.6, micro build)
*/
t.exports=function(){"use strict";var t=1,e=2,n=3,i=4,o=5,r="undefined"!=typeof window,a=(r?window:{}).requestAnimationFrame,s={};function l(){}var u=Array.isArray;function c(t){return null!=t}function d(t){return null!=t&&t.constructor===Object}function f(t,e,n,i){t.splice.apply(t,[n,i].concat(e))}function p(t){var e=typeof t;return"string"===e||"number"===e}function h(t){return"function"==typeof t}function v(t){for(var e=arguments,n=1;n<e.length;n++)for(var i in e[n])t[i]=e[n][i];return t}function _(t,e){for(var n=[],i=e;i<t.length;i++)n.push(t[i]);return n}function g(t,e){for(var n in t)if(t[n]!==e[n])return!1;return!0}function y(t,e){var n=t.length;if(e.length!==n)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function m(t){if(!a)return t;var e,n,i;function o(){e=0,t.apply(n,i)}return function(){n=this,i=arguments,e||(e=a(o))}}function b(t){return"o"===t[0]&&"n"===t[1]}function w(t){return"_"===t[0]}function x(t){return"style"===t}function O(t){t&&t.el&&t.el.offsetHeight}function T(t){return null!=t.node&&null!=t.node.el}function k(t,e){switch(e){case"value":case"checked":case"selected":return!0}return!1}function C(t){for(t=t||s;null==t.vm&&t.parent;)t=t.parent;return t.vm}function D(){}var I=D.prototype={constructor:D,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_class:null,_diff:null,_dead:!1,_lis:!1,idx:null,parent:null};function E(t){var n=new D;return n.type=e,n.body=t,n}var P={},M=/\[(\w+)(?:=(\w+))?\]/g,j=1,S=2,A=4,L=8;function B(e,n,i,o){var r=new D;r.type=t,c(o)&&(r.flags=o),r.attrs=n;var a=function(t){var e,n,i,o,r=P[t];if(null==r)for(P[t]=r={tag:(e=t.match(/^[-\w]+/))?e[0]:"div",id:(n=t.match(/#([-\w]+)/))?n[1]:null,class:(i=t.match(/\.([-\w.]+)/))?i[1].replace(/\./g," "):null,attrs:null};o=M.exec(t);)null==r.attrs&&(r.attrs={}),r.attrs[o[1]]=o[2]||"";return r}(e);if(r.tag=a.tag,a.id||a.class||a.attrs){var s=r.attrs||{};if(a.id&&!c(s.id)&&(s.id=a.id),a.class&&(r._class=a.class,s.class=a.class+(c(s.class)?" "+s.class:"")),a.attrs)for(var l in a.attrs)c(s[l])||(s[l]=a.attrs[l]);r.attrs=s}var u=r.attrs;return c(u)&&(c(u._key)&&(r.key=u._key),c(u._ref)&&(r.ref=u._ref),c(u._hooks)&&(r.hooks=u._hooks),c(u._data)&&(r.data=u._data),c(u._flags)&&(r.flags=u._flags),c(r.key)||(c(r.ref)?r.key=r.ref:c(u.id)?r.key=u.id:c(u.name)&&(r.key=u.name+("radio"===u.type||"checkbox"===u.type?u.value:"")))),null!=i&&(r.body=i),r}function R(t,n,r,a){if(t.type!==o&&t.type!==i){t.parent=n,t.idx=r,t.vm=a,null!=t.ref&&function(t,e,n){var i=["refs"].concat(e.split("."));!function(t,e,n){for(var i;i=e.shift();)0===e.length?t[i]=n:t[i]=t=t[i]||{}}(t,i,n)}(C(t),t.ref,t);var s=t.hooks,l=a&&a.hooks;(s&&(s.willRemove||s.didRemove)||l&&(l.willUnmount||l.didUnmount))&&function(t){for(;t=t.parent;)t.flags|=j}(t),u(t.body)&&function(t){for(var n=t.body,i=0;i<n.length;i++){var o=n[i];!1===o||null==o?n.splice(i--,1):u(o)?f(n,o,i--,1):(null==o.type&&(n[i]=o=E(""+o)),o.type===e?null==o.body||""===o.body?n.splice(i--,1):i>0&&n[i-1].type===e?(n[i-1].body+=o.body,n.splice(i--,1)):R(o,t,i,null):R(o,t,i,null))}}(t)}}var F={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,order:!0,lineClamp:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function N(t,e){return isNaN(e)||F[t]?e:e+"px"}function z(t,e){var n=(t.attrs||s).style,i=e?(e.attrs||s).style:null;if(null==n||p(n))t.el.style.cssText=n;else{for(var o in n){var r=n[o];(null==i||null!=r&&r!==i[o])&&(t.el.style[o]=N(o,r))}if(i)for(var a in i)null==n[a]&&(t.el.style[a]="")}}var V=[];function H(t,e,n,i,o){if(null!=t){var r=n.hooks[e];if(r){if("d"!==e[0]||"i"!==e[1]||"d"!==e[2])return r(n,i);o?O(n.parent)&&r(n,i):V.push([r,n,i])}}}function U(t){var e;if(V.length)for(O(t.node);e=V.shift();)e[0](e[1],e[2])}var W=r?document:null;function Y(t){return t.nextSibling}function q(t,e,n){var i=e._node,o=i.vm;if(u(i.body))if((i.flags&j)===j)for(var r=0;r<i.body.length;r++)q(e,i.body[r].el);else $(i);delete e._node,t.removeChild(e),H(i.hooks,"didRemove",i,null,n),null!=o&&(H(o.hooks,"didUnmount",o,o.data,n),o.node=null)}function X(t,e){var n=e._node;if(!n._dead){var i=function t(e){var n=e.vm,i=null!=n&&H(n.hooks,"willUnmount",n,n.data),o=H(e.hooks,"willRemove",e);if((e.flags&j)===j&&u(e.body))for(var r=0;r<e.body.length;r++)t(e.body[r]);return i||o}(n);null!=i&&function(t){return"object"==typeof t&&h(t.then)}(i)?(n._dead=!0,i.then(function(t,e,n){return function(){return t.apply(n,e)}}(q,[t,e,!0]))):q(t,e)}}function $(t){for(var e=t.body,n=0;n<e.length;n++){var i=e[n];delete i.el._node,null!=i.vm&&(i.vm.node=null),u(i.body)&&$(i)}}function G(t){var e=t.el;if(0==(t.flags&j))u(t.body)&&$(t),e.textContent=null;else{var n=e.firstChild;do{var i=Y(n);X(e,n)}while(n=i)}}function K(t,e,n){var i=e._node,o=null!=e.parentNode,r=e!==n&&o?null:i.vm;null!=r&&H(r.hooks,"willMount",r,r.data),H(i.hooks,o?"willReinsert":"willInsert",i),t.insertBefore(e,n),H(i.hooks,o?"didReinsert":"didInsert",i),null!=r&&H(r.hooks,"didMount",r,r.data)}function J(t,e,n){K(t,e,n?Y(n):null)}var Z={},Q=l;function tt(t,e,n){t[e]=n}function et(t,e,n,i,o){var r=t.apply(o,e.concat([n,i,o,o.data]));o.onevent(n,i,o,o.data,e),Q.call(null,n,i,o,o.data,e),!1===r&&(n.preventDefault(),n.stopPropagation())}function nt(t){var e,n,i=function(t){for(;null==t._node;)t=t.parentNode;return t._node}(t.target),o=C(i),r=t.currentTarget._node.attrs["on"+t.type];if(u(r))e=r[0],n=r.slice(1),et(e,n,t,i,o);else for(var a in r)if(t.target.matches(a)){var s=r[a];u(s)?(e=s[0],n=s.slice(1)):(e=s,n=[]),et(e,n,t,i,o)}}function it(t,e,n,i){if(n!==i){var o=t.el;null==n||h(n)?tt(o,e,n):null==i&&tt(o,e,nt)}}function ot(t,e,n){"."===e[0]&&(e=e.substr(1),n=!0),n?t.el[e]="":t.el.removeAttribute(e)}function rt(t,e,n,i,o){var r=t.el;null==n?!o&&ot(t,e,!1):null!=t.ns?r.setAttribute(e,n):"class"===e?r.className=n:"id"===e||"boolean"==typeof n||i?r[e]=n:"."===e[0]?r[e.substr(1)]=n:r.setAttribute(e,n)}function at(t,e,n){var i=t.attrs||s,o=e.attrs||s;if(i===o);else{for(var r in i){var a=i[r],l=k(t.tag,r),u=l?t.el[r]:o[r];a===u||(x(r)?z(t,e):w(r)||(b(r)?it(t,r,a,u):rt(t,r,a,l,n)))}for(var r in o)!(r in i)&&!w(r)&&ot(t,r,k(t.tag,r)||b(r))}}function st(t,e,n,o){return t.type===i&&(e=t.data,n=t.key,o=t.opts,t=t.view),new xt(t,e,n,o)}function lt(t){for(var e=0;e<t.body.length;e++){var r=t.body[e],a=r.type;if(a<=n)K(t.el,ut(r));else if(a===i){var s=st(r.view,r.data,r.key,r.opts)._redraw(t,e,!1);a=s.node.type,K(t.el,ut(s.node))}else if(a===o){var s=r.vm;s._redraw(t,e),a=s.node.type,K(t.el,s.node.el)}}}function ut(i,o){return null==i.el&&(i.type===t?(i.el=o||function(t,e){return null!=e?W.createElementNS(e,t):W.createElement(t)}(i.tag,i.ns),null!=i.attrs&&at(i,s,!0),(i.flags&L)===L&&i.body.body(i),u(i.body)?lt(i):null!=i.body&&""!==i.body&&(i.el.textContent=i.body)):i.type===e?i.el=o||function(t){return W.createTextNode(t)}(i.body):i.type===n&&(i.el=o||function(t){return W.createComment(t)}(i.body))),i.el._node=i,i.el}window.lisMove=pt;var ct=1,dt=2;function ft(t,e,n,i,o,r,a,s){return function(l,u,c,d,f,p){var h,v;if(null!=d[i]){if(null==(h=d[i]._node))return void(d[i]=t(d[i]));if(function(t){return t.parent}(h)!==l)return v=t(d[i]),null!=h.vm?h.vm.unmount(!0):X(u,d[i]),void(d[i]=v)}if(d[o]==f)return dt;if(null==d[o].el)n(u,ut(d[o]),d[i]),d[o]=e(d[o],c);else if(d[o].el===d[i])d[o]=e(d[o],c),d[i]=t(d[i]);else{if(p||h!==d[a])return p&&null!=d[i]?pt(t,e,n,i,o,u,c,h,d):ct;v=d[i],d[i]=t(v),s(u,v,d[r]),d[r]=v}}}function pt(t,e,n,i,o,r,a,s,l){if(s._lis)n(r,l[o].el,l[i]),l[o]=e(l[o],a);else{var u=function(t,e){var n,i=0,o=e.length-1;if(o<=2147483647)for(;i<=o;){if(e[n=i+o>>1]===t)return n;e[n]<t?i=n+1:o=n-1}else for(;i<=o;){if(n=Math.floor((i+o)/2),e[n]===t)return n;e[n]<t?i=n+1:o=n-1}return i==e.length?null:i}(s.idx,l.tombs);s._lis=!0;var c=t(l[i]);n(r,l[i],null!=u?a[l.tombs[u]].el:u),null==u?l.tombs.push(s.idx):l.tombs.splice(u,0,s.idx),l[i]=c}}var ht=ft(Y,function(t,e){return e[t.idx+1]},K,"lftSib","lftNode","rgtSib","rgtNode",J),vt=ft(function(t){return t.previousSibling},function(t,e){return e[t.idx-1]},J,"rgtSib","rgtNode","lftSib","lftNode",K);function _t(t,e,n,i){for(var o=Array.prototype.slice.call(e.childNodes),r=[],a=0;a<o.length;a++){var s=o[a]._node;s.parent===t&&r.push(s.idx)}for(var l=function(t){var e,n,i=t.slice(),o=[];o.push(0);for(var r=0,a=t.length;r<a;++r){var s=o[o.length-1];if(t[s]<t[r])i[r]=s,o.push(r);else{for(e=0,n=o.length-1;e<n;){var l=(e+n)/2|0;t[o[l]]<t[r]?e=l+1:n=l}t[r]<t[o[e]]&&(e>0&&(i[r]=o[e-1]),o[e]=r)}}for(e=o.length,n=o[e-1];e-- >0;)o[e]=n,n=i[n];return o}(r).map(function(t){return r[t]}),u=0;u<l.length;u++)n[l[u]]._lis=!0;for(i.tombs=l;;){var c=ht(t,e,n,i,null,!0);if(c===dt)break}}function gt(t){return t.el._node.parent!==t.parent}function yt(t,e,n){return e[n]}function mt(t,e,n){for(;n<e.length;n++){var r=e[n];if(null!=r.vm){if(t.type===i&&r.vm.view===t.view&&r.vm.key===t.key||t.type===o&&r.vm===t.vm)return r}else if(!gt(r)&&t.tag===r.tag&&t.type===r.type&&t.key===r.key&&(t.flags&~j)==(r.flags&~j))return r}return null}function bt(t,e,n){return e[e._keys[t.key]]}function wt(r,a){H(a.hooks,"willRecycle",a,r);var l=r.el=a.el,c=a.body,d=r.body;if(l._node=r,r.type!==e||d===c){null==r.attrs&&null==a.attrs||at(r,a,!1);var f=u(c),p=u(d),h=(r.flags&L)===L;f?p||h?function(e,r){var a=e.body,l=a.length,u=r.body,c=u.length,d=(e.flags&L)===L,f=(e.flags&S)===S,p=(e.flags&A)===A,h=!f&&e.type===t,v=!0,_=p?bt:f||d?yt:mt;if(p){for(var g={},y=0;y<u.length;y++)g[u[y].key]=y;u._keys=g}if(h&&0===l)return G(r),void(d&&(e.body=[]));var m,b,w=0,x=!1,O=0;if(d)var k={key:null},C=Array(l);for(var y=0;y<l;y++){if(d){var D=!1,I=null;v&&(p&&(k.key=a.key(y)),m=_(k,u,O)),null!=m?(b=m.idx,!0===(I=a.diff(y,m))?((E=m).parent=e,E.idx=y,E._lis=!1):D=!0):D=!0,D&&(R(E=a.tpl(y),e,y),E._diff=null!=I?I:a.diff(y),null!=m&&wt(E,m)),C[y]=E}else{var E=a[y],P=E.type;if(P<=n)(m=v&&_(E,u,O))&&(wt(E,m),b=m.idx);else if(P===i){if(m=v&&_(E,u,O)){b=m.idx;var M=m.vm._update(E.data,e,y)}else var M=st(E.view,E.data,E.key,E.opts)._redraw(e,y,!1);P=M.node.type}else if(P===o){var j=T(E.vm),M=E.vm._update(E.data,e,y,j);P=M.node.type}}if(!p&&null!=m&&(b===O?++O===c&&l>c&&(m=null,v=!1):x=!0,c>100&&x&&++w%10==0))for(;O<c&&gt(u[O]);)O++}d&&(e.body=C),h&&function(t,e){var n=e.body,i=t.el,o=t.body,r={lftNode:o[0],rgtNode:o[o.length-1],lftSib:(n[0]||s).el,rgtSib:(n[n.length-1]||s).el};t:for(;;){for(;;){var a=ht(t,i,o,r,null,!1);if(a===ct)break;if(a===dt)break t}for(;;){var l=vt(t,i,o,r,r.lftNode,!1);if(l===ct)break;if(l===dt)break t}_t(t,i,o,r);break}}(e,r)}(r,a):d!==c&&(null!=d?l.textContent=d:G(a)):p?(G(a),lt(r)):d!==c&&(l.firstChild?l.firstChild.nodeValue=d:l.textContent=d),H(a.hooks,"didRecycle",a,r)}else l.nodeValue=d}function xt(t,e,n,i){var o=this;o.view=t,o.data=e,o.key=n,i&&(o.opts=i,o.config(i));var r=d(t)?t:t.call(o,o,e,n,i);h(r)?o.render=r:(o.render=r.render,o.config(r)),o._redrawAsync=m(function(t){return o.redraw(!0)}),o._updateAsync=m(function(t){return o.update(t,!0)}),o.init&&o.init.call(o,o,o.data,o.key,i)}var Ot=xt.prototype={constructor:xt,_diff:null,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,onevent:l,refs:null,render:null,mount:function(t,e){var n=this;return e?(G({el:t,flags:0}),n._redraw(null,null,!1),t.nodeName.toLowerCase()!==n.node.tag?(ut(n.node),K(t.parentNode,n.node.el,t),t.parentNode.removeChild(t)):K(t.parentNode,ut(n.node,t),t)):(n._redraw(null,null),t&&K(t,n.node.el)),t&&U(n),n},unmount:function(t){var e=this.node;X(e.el.parentNode,e.el),t||U(this)},config:function(t){var e=this;t.init&&(e.init=t.init),t.diff&&(e.diff=t.diff),t.onevent&&(e.onevent=t.onevent),t.hooks&&(e.hooks=v(e.hooks||{},t.hooks)),t.onemit&&(e.onemit=v(e.onemit||{},t.onemit))},parent:function(){return C(this.node.parent)},root:function(){for(var t=this.node;t.parent;)t=t.parent;return t.vm},redraw:function(t){return t?this._redraw(null,null,T(this)):this._redrawAsync(),this},update:function(t,e){return e?this._update(t,null,null,T(this)):this._updateAsync(t),this},_update:function(t,e,n,i){var o=this;return null!=t&&o.data!==t&&(H(o.hooks,"willUpdate",o,t),o.data=t),o._redraw(e,n,i)},_redraw:function(t,e,n){var i,o,r=null==t,a=this,s=a.node&&a.node.el&&a.node.el.parentNode,l=a.node;if(null!=a.diff&&(i=a._diff,a._diff=o=a.diff(a,a.data),null!=l)){var c=u(i)?y:g,d=i===o||c(i,o);if(d)return Tt(a,l,t,e)}s&&H(a.hooks,"willRedraw",a,a.data);var f=a.render.call(a,a,a.data,i,o);if(f===l)return Tt(a,l,t,e);if(a.refs=null,null!=a.key&&f.key!==a.key&&(f.key=a.key),a.node=f,t?(R(f,t,e,a),t.body[e]=f):l&&l.parent?(R(f,l.parent,l.idx,a),l.parent.body[l.idx]=f):R(f,null,null,a),!1!==n)if(l)if(l.tag!==f.tag||l.key!==f.key){l.vm=f.vm=null;var p=l.el.parentNode,h=Y(l.el);X(p,l.el),K(p,ut(f),h),l.el=f.el,f.vm=a}else wt(f,l);else ut(f);return s&&H(a.hooks,"didRedraw",a,a.data),r&&s&&U(a),a},_redrawAsync:null,_updateAsync:null};function Tt(t,e,n,i){return null!=n&&(n.body[i]=e,e.idx=i,e.parent=n,e._lis=!1),t}function kt(t,e,n,i){var o,r;return null==n?d(e)?o=e:r=e:(o=e,r=n),B(t,o,r,i)}var Ct="http://www.w3.org/2000/svg";function Dt(t,e,n,i){this.view=t,this.data=e,this.key=n,this.opts=i}function It(t){this.vm=t}Dt.prototype={constructor:Dt,type:i,view:null,data:null,key:null,opts:null},It.prototype={constructor:It,type:o,vm:null};var Et={config:function(t){Q=t.onevent||Q,t.onemit&&function(t){v(Z,t)}(t.onemit)},ViewModel:xt,VNode:D,createView:st,defineElement:kt,defineSvgElement:function(t,e,n,i){var o=kt(t,e,n,i);return o.ns=Ct,o},defineText:E,defineComment:function(t){var e=new D;return e.type=n,e.body=t,e},defineView:function(t,e,n,i){return new Dt(t,e,n,i)},injectView:function(t){return new It(t)},injectElement:function(e){var n=new D;return n.type=t,n.el=n.key=e,n},lazyList:function(t,e){var n=t.length,i={items:t,length:n,key:function(n){return e.key(t[n],n)},diff:function(n,i){var o=e.diff(t[n],n);if(null==i)return o;var r=i._diff,a=o===r||u(r)?y(o,r):g(o,r);return a||o},tpl:function(n){return e.tpl(t[n],n)},map:function(t){return e.tpl=t,i},body:function(t){for(var e=Array(n),o=0;o<n;o++){var r=i.tpl(o);r._diff=i.diff(o),e[o]=r,R(r,t,o)}t.body=e}};return i},FIXED_BODY:S,DEEP_REMOVE:j,KEYED_LIST:A,LAZY_LIST:L};function Pt(t){var e,n,i=arguments,o=i.length;if(o>1){var r=1;d(i[1])&&(n=i[1],r=2),e=o===r+1&&(p(i[r])||u(i[r])||n&&(n._flags&L)===L)?i[r]:_(i,r)}return B(t,n,e)}return I.patch=function(t,e){!function(t,e,n){if(null!=e.type){if(null!=t.vm)return;R(e,t.parent,t.idx,null),t.parent.body[t.idx]=e,wt(e,t),n&&O(e),U(C(e))}else{var i=Object.create(t);i.attrs=v({},t.attrs);var o=v(t.attrs,e);if(null!=t._class){var r=o.class;o.class=null!=r&&""!==r?t._class+" "+r:t._class}at(t,i),n&&O(t)}}(this,t,e)},Ot.emit=function(t){var e=this,n=e,i=_(arguments,1).concat(n,n.data);do{var o=e.onemit,r=o?o[t]:null;if(r){r.apply(e,i);break}}while(e=e.parent());Z[t]&&Z[t].apply(e,i)},Ot.onemit=null,Ot.body=function(){return function t(e,n){var i=e.body;if(u(i))for(var o=0;o<i.length;o++){var r=i[o];null!=r.vm?n.push(r.vm):t(r,n)}return n}(this.node,[])},Et.defineElementSpread=Pt,Et.defineSvgElementSpread=function(){var t=Pt.apply(null,arguments);return t.ns=Ct,t},Et}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(0),r=n(1),a=function(){function t(t,e){var n;void 0===e&&(e={});var o=this;this.config=i.extend({speed:20},e),this._wheelName=r.isIE()?"onmousewheel":"onwheel",this._getRootView=t,this._scrollTop=0,this._runnerTop=0,this._runnerHeight=0,this._visibleArea=1,this._scrollWidth=r.getScrollbarWidth(),this._handlers=((n={onscroll:function(){o._update()}})[this._wheelName]=function(t){t.preventDefault();var e=((t.deltaY||-t.wheelDelta)>0?1:-1)*o.config.speed,n=o._getRefs().area,i=n.scrollHeight-o._runnerHeight,r=o._scrollTop+e;n.scrollTop=r<0?0:r>i?i:r,o._update()},n.onmousedownRunner=function(t){t.preventDefault();var e=o._getRefs(),n=e.area,i=e.runner,r=n.getBoundingClientRect(),a=r.top+window.pageYOffset,s=r.bottom+window.pageYOffset,l=n.scrollHeight-o._runnerHeight,u=t.pageY-i.getBoundingClientRect().top-window.pageYOffset,c=function(t){var e=t.pageY-u;n.scrollTop=e<=a?0:e>s?l:(e-a)/o._visibleArea,o._update()},d=function(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),document.body.classList.remove("dhx-no-select")};document.body.classList.add("dhx-no-select"),document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)},n.onmousedownTrack=function(t){if(!t.target.classList.contains("scroll-runner")){t.preventDefault();var e=function(){document.removeEventListener("mouseup",e),window.clearInterval(l)},n=o._getRefs().area,i=t.target.getBoundingClientRect().top+window.pageYOffset,r=n.scrollHeight-o._runnerHeight,a=t.pageY,s=function(){var t;if(a<i+o._runnerTop)(t=o._scrollTop-n.clientHeight)<0&&(t=0);else{if(!(a>i+o._runnerTop+o._runnerHeight))return;(t=o._scrollTop+n.clientHeight)>r&&(t=r)}n.scrollTop=t,o._update()};s();var l=setInterval(s,100);document.addEventListener("mouseup",e)}},n)}return t.prototype.render=function(t){var e,n=this;return 0===this._scrollWidth?t:o.el(".scroll-view-wrapper",{style:{width:"100%",height:"100%",overflow:"hidden",position:"relative"}},[o.el(".scroll-view",{onscroll:this._handlers.onscroll,_ref:"scroll-view",_hooks:{didInsert:function(){n._update()},didRecycle:function(){n._update()}},style:{height:"100%",width:"calc(100% + "+this._scrollWidth+"px)",overflowY:"scroll","-ms-overflow-style":"scrollbar"}},[t]),o.el(".y-scroll",(e={onmousedown:this._handlers.onmousedownTrack},e[this._wheelName]=this._handlers[this._wheelName],e.style={width:"10px",height:"100%",right:0,top:0,position:"absolute"},e),[o.el(".scroll-runner",{_ref:"scroll-runner",onmousedown:this._handlers.onmousedownRunner,style:{height:this._runnerHeight+"px",right:"2px",top:this._runnerTop,width:"6px",position:"absolute"}})])])},t.prototype._update=function(){var t=this._getRefs();if(t){var e=t.area,n=t.runner;this._visibleArea=e.clientHeight/e.scrollHeight,this._scrollTop=e.scrollTop,this._runnerTop=this._scrollTop*this._visibleArea,this._visibleArea<1?this._runnerHeight=e.clientHeight*this._visibleArea:this._runnerHeight=0,n.style.top=this._runnerTop+"px",n.style.height=this._runnerHeight+"px"}},t.prototype._getRefs=function(){var t=this._getRootView();if(t.refs&&t.refs["scroll-view"]&&t.refs["scroll-runner"])return{area:t.refs["scroll-view"].el,runner:t.refs["scroll-runner"].el}},t}();e.ScrollView=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(46))},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(47),r=n(0),a=function(t){function e(n,i){var o=t.call(this,n,i)||this;if(o.config.views&&(o.config.activeView=o.config.activeView||0,o._isViewLayout=!0),o._all={},o._parseConfig(),o._css+=o._xLayout?"layout_x":"layout_y",!(n instanceof e)){var a=r.create({render:function(){return o.toVDOM()}},o);o.mount(n,a)}return o}return i(e,t),e.prototype.cell=function(t){return this._all[t]},e.prototype.updateActiveView=function(t){for(var e=0;e<this._cells.length;e++)if(this._cells[e].id===t)return void(this.config.activeView!==e&&(this.config.activeView=e,this.paint()))},e.prototype.getActiveView=function(){return this._cells[this.config.activeView]},e.prototype.toVDOM=function(){if(this._isViewLayout)return t.prototype.toVDOM.call(this,[this.getActiveView().toVDOM()]);var e=[];return this._cells.forEach(function(t){var n=t.toVDOM();Array.isArray(n)?e.push.apply(e,n):e.push(n)}),t.prototype.toVDOM.call(this,e,this._isTopParent)},e.prototype.removeCell=function(t){var e=this.getTopParent();if(e._all[t]){var n=e._all[t].getParent();delete e._all[t];for(var i=n._cells,o=-1,r=0;r<i.length;r++)if(i[r].id===t){o=r;break}-1!==o&&i.splice(o,1),this.paint()}},e.prototype.addCell=function(t,e){void 0===e&&(e=-1);var n=this.getTopParent(),i=this._parseView(t,n);e<0&&(e=this._cells.length+e+1),this._cells.splice(e,0,i),this.paint()},e.prototype.getId=function(t){return t<0&&(t=this._cells.length+t),this._cells[t]?this._cells[t].id:void 0},e.prototype._parseConfig=function(){var t=this,e=this.config,n=this.getTopParent(),i=e.rows||e.cols||e.views;this._xLayout=!e.rows,this._cells=i.map(function(e){return t._parseView(e,n)})},e.prototype._createUi=function(t){return t.rows||t.cols||t.views?new e(this,t):new o.Cell(this,t)},e.prototype._parseView=function(t,e){var n=this._createUi(t);return t.id&&(e._all[t.id]=n),n},e}(o.Cell);e.Layout=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r,a=n(0),s=n(12);!function(t){t[t.unknown=0]="unknown",t[t.percents=1]="percents",t[t.pixels=2]="pixels",t[t.mixedpx1=3]="mixedpx1",t[t.mixedpx2=4]="mixedpx2",t[t.mixedperc1=5]="mixedperc1",t[t.mixedperc2=6]="mixedperc2"}(r||(r={}));var l=function(t){function e(n,i){var o=t.call(this,n,i)||this;return o._parent=n,o._isTopParent=!(n instanceof e),o._initHandlers(),o.mount(n,{redraw:function(){n.paint()}}),o.id=o.config.id,o._css="",o}return i(e,t),e.prototype.isVisible=function(){return!this.config.hidden},e.prototype.isView=function(){return!!this._parent.config.views},e.prototype.hide=function(){this.config.hidden=!0,this.paint()},e.prototype.show=function(t){this.isView()?this._parent.updateActiveView(this.id):(this._parent&&!this._parent.isVisible()&&this._parent.show(),this.config.hidden=!1,this.paint())},e.prototype.getParent=function(){return this._parent},e.prototype.getTopParent=function(){if(this._isTopParent)return this;for(var t=this.getParent();t;){if(t._isTopParent)return t;t=t.getParent()}},e.prototype.destructor=function(){this.config=null},e.prototype.getWidget=function(){return this._ui},e.prototype.attach=function(t,e){return"object"==typeof t?this._ui=t:"string"==typeof t?this._ui=new window.dhx[t](null,e):"function"==typeof t&&(t.prototype instanceof s.View?this._ui=new t(null,e):this._ui={getRootView:function(){return t(e)}}),this.paint(),this._ui},e.prototype.toVDOM=function(t,e){if(void 0===e&&(e=!1),!this.config.hidden){var n,i=this._css+" "+(this.config.css||"")+(e?" dhx_widget":""),r=this._calculateStyle();if(this.config.html)n=[a.el("div",{".innerHTML":this.config.html})];else if(this._ui){var s=this._ui.getRootView();s.render&&(s=a.inject(s)),n=[s]}else n=t||null;var l=this.config.canResize&&!this._isLastCell()?a.el(".resizer."+(this._isXDirection()?"x":"y"),o({},this._resizerHandlers,{_ref:"resizer_"+this._uid}),[a.el("div",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,u={};if(this.config.on)for(var c in this.config.on)u["on"+c]=this.config.on[c];var d=a.el("div",o({_key:this._uid,style:r,_ref:this._uid},u,{class:"dhx_cell "+i+(this.config.collapsed?" collapsed":"")}),[this.config.header?a.el("div",{class:"dhx_cell_header",onclick:this._handlers.collapse},[a.el(".header-text",this.config.header),a.el(".header-action-icon",[a.el("div",{class:"dxi "+this.config.headerIcon})])]):null,this.config.collapsed?null:a.el("div",{class:"dhx_cell_content"},n),this.config.footer?a.el("div",{class:"dhx_cell_footer"},this.config.footer):null]);return l?[d,l]:d}},e.prototype._initHandlers=function(){var t=this,e={left:null,top:null,isActive:!1,range:null,xLayout:null,nextCell:null,size:null,resizerLength:null,mode:null,percentsum:null},n=function(){e.isActive=!1,document.body.classList.remove("dhx-no-select"),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",i)},i=function(n){if(e.isActive&&e.mode!==r.unknown){var i=e.xLayout?n.x-e.range.min-window.pageXOffset:n.y-e.range.min-window.pageYOffset,o=e.xLayout?"width":"height";switch(i<0?i=e.resizerLength/2:i>e.size&&(i=e.size-e.resizerLength),e.mode){case r.pixels:t.config[o]=i-e.resizerLength/2+"px",e.nextCell.config[o]=e.size-i-e.resizerLength/2+"px";break;case r.mixedpx1:t.config[o]=i-e.resizerLength/2+"px";break;case r.mixedpx2:e.nextCell.config[o]=e.size-i-e.resizerLength/2+"px";break;case r.percents:t.config[o]=i/e.size*e.percentsum+"%",e.nextCell.config[o]=(e.size-i)/e.size*e.percentsum+"%";break;case r.mixedperc1:t.config[o]=i/e.size*e.percentsum+"%";break;case r.mixedperc2:e.nextCell.config[o]=(e.size-i)/e.size*e.percentsum+"%"}t.paint()}};this._handlers={collapse:function(){t.config.canCollapse&&(t.config.collapsed=!t.config.collapsed,t.paint())}},this._resizerHandlers={onmousedown:function(o){if(3!==o.which){e.isActive&&n(),document.body.classList.add("dhx-no-select");var a=t._getCellView(),s=t._getNextCell(),l=s._getCellView(),u=t._getResizerView(),c=a.el.getBoundingClientRect(),d=u.el.getBoundingClientRect(),f=l.el.getBoundingClientRect();if(e.xLayout=t._isXDirection(),e.left=c.left+window.pageXOffset,e.top=c.top+window.pageYOffset,e.range=function(t,e,n){return void 0===n&&(n=!0),n?{min:t.left+window.pageXOffset,max:e.right+window.pageXOffset}:{min:t.top+window.pageYOffset,max:e.bottom+window.pageYOffset}}(c,f,e.xLayout),e.size=e.range.max-e.range.min,e.isActive=!0,e.nextCell=s,e.resizerLength=e.xLayout?d.width:d.height,e.mode=function(t,e,n){var i=t?"width":"height",o=e[i]&&-1!==e[i].indexOf("%"),a=n[i]&&-1!==n[i].indexOf("%"),s=e[i]&&-1!==e[i].indexOf("px"),l=n[i]&&-1!==n[i].indexOf("px");return o&&a?r.percents:s&&l?r.pixels:s&&!l?r.mixedpx1:l&&!s?r.mixedpx2:o?r.mixedperc1:a?r.mixedperc2:r.unknown}(e.xLayout,t.config,s.config),e.mode===r.percents){var p=e.xLayout?"width":"height";e.percentsum=parseFloat(t.config[p])+parseFloat(s.config[p])}if(e.mode===r.mixedperc1){p=e.xLayout?"width":"height";e.percentsum=1/(c[p]/(e.size-e.resizerLength))*parseFloat(t.config[p])}if(e.mode===r.mixedperc2){p=e.xLayout?"width":"height";e.percentsum=1/(f[p]/(e.size-e.resizerLength))*parseFloat(s.config[p])}document.addEventListener("mouseup",n),document.addEventListener("mousemove",i)}},ondragstart:function(t){return t.preventDefault()}}},e.prototype._isLastCell=function(){var t=this._parent;return t&&t._cells.indexOf(this)===t._cells.length-1},e.prototype._getNextCell=function(){var t=this._parent,e=t._cells.indexOf(this);return t._cells[e+1]},e.prototype._getCellView=function(){return this.getTopParent().getRootView().refs[this._uid]},e.prototype._getResizerView=function(){return this.getTopParent().getRootView().refs["resizer_"+this._uid]},e.prototype._isXDirection=function(){return this._parent&&this._parent._xLayout},e.prototype._calculateStyle=function(){var t=this.config,e={};return this._isXDirection()?(void 0!==this.config.width&&(e.flex="0 0 "+t.width),void 0!==t.height&&(e.height=t.height)):(void 0!==this.config.height&&(e.flex="0 0 "+t.height),void 0!==t.width&&(e.width=t.width)),e},e}(s.View);e.Cell=l},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(26)),i(n(61)),i(n(62)),i(n(63)),i(n(17));var o=n(4);e.ToolbarEvents=o.ToolbarEvents,e.ItemType=o.ItemType},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.button=function(t){return i.el("div",{class:"button-container main-btn element"+o.getCss(t)+(t.value?"":" no-text"),dhx_id:t.id},[o.counter(t),t.icon?o.icon(t.icon):null,t.value?i.el(".button-text",t.value):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.customHTMLButton=function(t){return i.el("div",{class:"button-container custom-html-btn element"+o.getCss(t),dhx_id:t.id},[o.counter(t),i.el(".html-content",{".innerHTML":t.html}),t.value?i.el(".button-text",t.value):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.dhx_button=function(t){return i.el("button",{class:"dhx_btn"+o.getCss(t)+o.getButtonCss(t),dhx_id:t.id},[t.icon?o.icon(t.icon):null,t.value?i.el(".item-value",t.value):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.iconButton=function(t){return i.el("div",{class:"icon-btn element"+o.getCss(t),dhx_id:t.id},[o.counter(t),o.icon(t.icon),t.css&&-1!==t.css.indexOf("ripple")?i.el(".ripple-container-outside"):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.imageButton=function(t){return i.el("div",{class:"button-container img-btn element"+o.getCss(t),dhx_id:t.id},[o.counter(t),i.el(".img-button-wrapper",[i.el("img.img-button",{src:t.src})])])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.imageButtonText=function(t){return i.el("div",{class:"button-container img-text-btn element"+o.getCss(t),dhx_id:t.id},[o.counter(t),i.el("img.img-button",{src:t.src}),i.el(".button-text",t.value)])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(4),r=n(2);e.input=function(t,e){return i.el("div",{dhx_id:t.id,class:"input-container element"+r.getCss(t)},[i.el(".input-wrapper",[i.el("input.text-input",{placeholder:t.placeholder,value:t.value,style:{width:t.width?t.width:null},_hooks:{didInsert:function(n){e&&e.fire(o.ToolbarEvents.inputCreated,[t.id,n.el])}},_key:t.id}),i.el(".input-animation")]),t.icon?r.icon(t.icon):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.menuItem=function(t){return i.el("div",{class:"menu-item element"+o.getCss(t),dhx_id:t.id},[t.icon?o.icon(t.icon):null,t.value?i.el("span.menu-item-content",t.value):null,t.$openIcon?i.el(".dhx-icon.sub-menu-opener",[i.el(".dxi."+("right"===t.$openIcon?".dxi-menu-right":".dxi-menu-down"))]):null,t.hotkey?i.el(".hotkey",t.hotkey):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.separator=function(t){return i.el(".separator")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.spacer=function(t){return i.el(".spacer")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.text=function(t){return i.el("div",{class:"text element"+o.getCss(t),dhx_id:t.id},t.value)}},function(t,e,n){"use strict";function i(t){for(var e=t.toLowerCase().match(/\w+/g),n=0,i="",o=0;o<e.length;o++){var r=e[o];"ctrl"===r?n+=4:"shift"===r?n+=2:"alt"===r?n+=1:i=r}return n+i}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){var t=this;this._keysStorage={},document.addEventListener("keydown",function(e){var n=(e.ctrlKey?4:0)+(e.shiftKey?2:0)+(e.altKey?1:0)+e.key.toLowerCase(),i=t._keysStorage[n];i&&i.handler(e)})}return t.prototype.addHotKey=function(t,e,n){var o=i(t);this._keysStorage[o]={handler:e,scope:n}},t.prototype.removeHotKey=function(t,e){var n=this._keysStorage;t&&delete n[o=i(t)];if(e)for(var o in n)n[o].scope===e&&delete n[o]},t.prototype.exist=function(t){var e=i(t);return!!this._keysStorage[e]},t}();e.keyManager=new o},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(13),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isContextMenu=!0,e}return i(e,t),e.prototype.showAt=function(t,e){if(void 0===e&&(e="bottom"),t instanceof MouseEvent)this._changeActivePosition({left:window.pageXOffset+t.x+1,right:window.pageXOffset+t.x+1,top:window.pageYOffset+t.y,bottom:window.pageYOffset+t.y},e);else{var n=o.toNode(t);this._changeActivePosition(r.getRealPosition(n),e)}},e.prototype._close=function(){this._activeMenu=null,this._changeActivePosition(null,null)},e.prototype._normalizeData=function(){var t=this,e=this.data.getRoot();this.data.eachChild(e,function(e){t.data.haveChilds(e.id)&&(e.$openIcon="right")},!0)},e.prototype._getMode=function(t,e,n){return n?this._mode:"right"},e.prototype._changeActivePosition=function(t,e){this._activePosition=t,this._mode=e,this._listenOuterClick(),this.paint()},e}(n(18).MenuBase);e.ContextMenu=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.mount(e,r.create({render:function(){return i._draw()}})),i}return i(e,t),e.prototype._draw=function(){return r.el("div",o({dhx_widget_id:this._uid,class:"main-menu"},this._handlers),this._drawMenuItems(this.data.getRoot()))},e}(n(18).MenuBase);e.Menu=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(13),a=n(26),s=n(4),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._draw=function(){var t=this;return o.el(".ribbon.dhx_widget",{dhx_widget_id:this._uid,onclick:this._handlers.onclick},this.data.map(function(e){return t._drawBlock(e.id)},this.data.getRoot(),!1))},e.prototype._setRoot=function(t){var e=this.data.getParent(t);this.data.getItem(e).type===s.ItemType.block&&(this._currentRoot=t)},e.prototype._normalizeData=function(){var t=this,e=this.data.getRoot(),n={};this.data.eachChild(e,function(e){if(e.type===s.ItemType.menuItem&&t.data.haveChilds(e.id)){t.data.eachChild(e.id,function(t){return t.type=t.type||s.ItemType.menuItem},!1);var i=t.data.getParent(e.id),o=t.data.getItem(i);e.$openIcon=o.type===s.ItemType.block?"bot":"right"}e.group&&r.addInGroups(n,e)},!0),this._groups=n},e.prototype._drawBlock=function(t){var e=this,n=this.data.getItem(t);if(!n)return null;var i="row"===n.direction?" ribbon-row":" ribbon-cols",r=this.data.map(function(t){return t.type===s.ItemType.block?e._drawBlock(t.id):e._factory(t)},t,!1);return o.el("div",{class:"ribbon-item-block"+i},[o.el(".block-content",r),n.label?o.el(".block-label",[o.el("span",n.label)]):null])},e}(a.Toolbar);e.Ribbon=l},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(1),r=n(8),a=n(15),s=function(){function e(t,e,n){void 0===t&&(t={}),this.config=i.extend({autosend:!0,updateFromResponse:!0,fieldName:"file"},t),this.data=e||new r.DataCollection,this.events=n||this.data.events,this.isActive=!1,this._fileInput=document.createElement("input"),this._fileInput.type="file",this._fileInput.multiple=!0,this._initEvents(),this._dropAreas=new Map}return e.prototype.selectFile=function(){this._fileInput.click()},e.prototype.linkDropArea=function(t){var e=this,n=o.toNode(t),i=function(){return n.style.cursor="pointer"},r=function(t){return t.preventDefault()},a=function(t){t.preventDefault(),e.parseFiles(t.dataTransfer)};n.addEventListener("mouseover",i),n.addEventListener("dragover",r),n.addEventListener("drop",a),this._dropAreas.set(n,{mouseover:i,dragover:r,drop:a})},e.prototype.unlinkDropArea=function(t){var e=this;if(t){var n=o.toNode(t);this._unlinkDropArea(n),this._dropAreas.delete(n)}else this._dropAreas.forEach(function(t,n){e._unlinkDropArea(n)}),this._dropAreas.clear()},e.prototype.parseFiles=function(t){if(t.items&&t.items[0]&&t.items[0].webkitGetAsEntry)this._parseAsWebkitEntry(t.items);else{for(var e=t.files,n=0;n<e.length;n++)this._addFile(e[n]);this.config.autosend&&this.send()}},e.prototype.send=function(t){var e=this;if(!this._uploadInfo||!this.isActive){var n=this.data.findAll(function(t){return t.status===a.FileStatus.queue||t.status===a.FileStatus.failed}).filter(function(t){return e.events.fire(a.UploaderEvents.beforeUploadFile,[t])});if(n.length)if(this.isActive=!0,this._uploadInfo={files:n,count:n.length,size:n.reduce(function(t,e){return t+e.file.size},0)},this.events.fire(a.UploaderEvents.uploadBegin,[n]),this.events.fire(a.UploaderEvents.uploadProgress,[0,0,this._uploadInfo.size]),this.config.singleRequest)this._xhrSend(n,t);else for(var i=0,o=n;i<o.length;i++){var r=o[i];this._xhrSend([r],t)}}},e.prototype.abort=function(t){if(t){var e=this.data.getItem(t);e&&e.request&&4!==e.request.readyState&&e.request.abort()}else{if(!this._uploadInfo||!this._uploadInfo.files)return;for(var n=0,i=this._uploadInfo.files;n<i.length;n++){var o=i[n];this.abort(o.id)}}},e.prototype._unlinkDropArea=function(t){var e=this._dropAreas.get(t);if(e){var n=e.mouseover,i=e.dragover,o=e.drop;t.removeEventListener("mouseover",n),t.removeEventListener("dragover",i),t.removeEventListener("drop",o)}},e.prototype._initEvents=function(){var t=this;this._fileInput.addEventListener("change",function(){for(var e=t._fileInput.files,n=0;n<e.length;n++)t._addFile(e[n]);t.config.autosend&&t.send(),t._fileInput.value=null})},e.prototype._xhrSend=function(t,e){for(var n=this,i=this._createFormData(t,e),o=new XMLHttpRequest,r=0,s=t;r<s.length;r++){var l=s[r];this.data.update(l.id,{request:o,status:a.FileStatus.inprogress,progress:0})}o.open("POST",this.config.target),o.upload.onprogress=function(e){for(var i=0,o=t;i<o.length;i++){var r=o[i];n.data.update(r.id,{progress:e.loaded/e.total,status:a.FileStatus.inprogress})}var s=n._uploadInfo.files.reduce(function(t,e){return t+e.size*e.progress},0)||0,l=n._uploadInfo.size,u=s/n._uploadInfo.size*100||0;n.events.fire(a.UploaderEvents.uploadProgress,[u,s,l])},o.onloadend=function(){n._uploadInfo.count=n.config.singleRequest?0:n._uploadInfo.count-1;for(var e=200===o.status?a.FileStatus.uploaded:a.FileStatus.failed,i=200===o.status&&o.response?JSON.parse(o.response):null,r=0,s=t;r<s.length;r++){var l=s[r];n.data.update(l.id,{status:e}),e===a.FileStatus.uploaded?(n.config.updateFromResponse&&i&&(n.config.singleRequest&&i[l.id]?n.data.update(l.id,i[l.id]):n.config.singleRequest||n.data.update(l.id,i)),n.events.fire(a.UploaderEvents.uploadFile,[l,i])):n.events.fire(a.UploaderEvents.uploadFail,[l])}0===n._uploadInfo.count&&(n.isActive=!1,n.events.fire(a.UploaderEvents.uploadComplete,[n._uploadInfo.files]))},o.send(i)},e.prototype._parseAsWebkitEntry=function(e){for(var n=this,i=[],o=0;o<e.length;o++){var r=e[o].webkitGetAsEntry();i.push(this._traverseFileTree(r))}t.all(i).then(function(){n.config.autosend&&n.send()})},e.prototype._createFormData=function(t,e){var n=this.config.fieldName,i=new FormData,o=this.config.params;if(e)for(var r in e)i.append(r,e[r]);if(o)for(var r in o)i.append(r,o[r]);for(var a=t.length>1?"[]":"",s=0,l=t;s<l.length;s++){var u=l[s];i.append(n+a,u.file,u.file.name),i.append(n+"_fullname"+a,u.path+u.file.name),i.append(n+"_id"+a,u.id)}return i},e.prototype._addFile=function(t,e){void 0===e&&(e="");var n={id:i.uid(),file:t,progress:0,status:a.FileStatus.queue,src:null,path:e};this.data.add(n)},e.prototype._traverseFileTree=function(e){var n=this;return new t(function(t){var i=0,o=function(e,o){if(e.isFile)i++,e.file(function(e){i--,n._addFile(e,o),0===i&&t()});else if(e.isDirectory){var a=e.createReader();r(a,o+e.name+"/")}},r=function(e,n){i++,e.readEntries(function(e){i--;for(var r=0,a=e;r<a.length;r++){var s=a[r];o(s,n)}0===i&&t()})};o(e,"")})},e}();e.Uploader=s}).call(this,n(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.layoutConfig={css:"vault-layout",rows:[{id:"topbar",css:"vault-topbar"},{id:"vault",css:"vault-file-grid"}]},e.layoutConfigWithoutTopbar={css:"vault-layout",rows:[{id:"vault",css:"vault-file-grid"}]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),o=["byte","kilobyte","megabyte","gigabyte"];e.getBasis=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t<1024?t+" "+i.default[o[e]]:this.getBasis(Math.round(t/1024),e+1)};var r,a=13;function s(t){return{extension:t.name.split(".").pop()||"none",mime:t.file?t.file.type:""}}function l(t,e){switch(t){case"jpg":case"jpeg":case"gif":case"png":case"bmp":case"tiff":case"pcx":case"svg":case"ico":return r.image;case"avi":case"mpg":case"mpeg":case"rm":case"move":case"mov":case"mkv":case"flv":case"f4v":case"mp4":case"3gp":case"wmv":case"webm":case"vob":return r.video;case"rar":case"zip":case"tar":case"tgz":case"arj":case"gzip":case"bzip2":case"7z":case"ace":case"apk":case"deb":case"zipx":case"cab":case"tar-gz":case"rpm":case"xar":return r.archive;case"xlr":case"xls":case"xlsm":case"xlsx":case"ods":case"csv":case"tsv":return r.table;case"doc":case"docx":case"docm":case"dot":case"dotx":case"odt":case"wpd":case"wps":case"pages":return r.document;case"wav":case"aiff":case"au":case"mp3":case"aac":case"wma":case"ogg":case"flac":case"ape":case"wv":case"m4a":case"mid":case"midi":return r.audio;case"pot":case"potm":case"potx":case"pps":case"ppsm":case"ppsx":case"ppt":case"pptx":case"pptm":case"odp":return r.presentation;case"html":case"htm":case"eml":return r.web;case"exe":return r.application;case"dmg":return r.apple;case"pdf":case"ps":case"eps":return r.pdf;case"psd":return r.psd;case"txt":case"djvu":case"nfo":case"xml":return r.text;default:switch(e.split("/")[0]){case"image":return r.image;case"audio":return r.audio;case"video":return r.video;default:return r.other}}}e.truncateWord=function(t,e){var n,i;if(void 0===e&&(e=a),t.length<=e)return t;var o=t.lastIndexOf(".");if(-1===o)i=t.substr(t.length-4),n=t.substr(0,e-7);else{var r=o-3;i=t.substr(r),n=t.substr(0,e-(t.length-r))}return n+"..."+i},e.calculateCover=function(t){var e,n,i,o,r=t.width,a=t.height,s=r/a;return s>1?(e=a,i=(r-(n=a))/2,o=0):s<1?(n=r,i=0,o=(a-(e=r))/2):(e=r,n=r,i=0,o=0),{sx:i,sy:o,sWidth:n,sHeight:e,dx:0,dy:0}},function(t){t.image="image",t.video="video",t.archive="archive",t.table="table",t.document="document",t.presentation="presentation",t.application="application",t.web="web",t.apple="apple",t.pdf="pdf",t.psd="psd",t.audio="audio",t.other="other",t.text="text"}(r=e.FileType||(e.FileType={})),e.getFileType=l,e.getFileClassName=function(t){var e=s(t),n=e.mime,i=e.extension;return l(i,n)+" extension-"+i},e.isImage=function(t){var e=s(t),n=e.mime;return l(e.extension,n)===r.image}},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(12),a=n(14),s=n(15),l=function(t){function e(e,n){var i=t.call(this,null,n)||this;i.events=e,i._progress=0;return i.mount(null,o.create({render:function(){return i._draw()}})),i._abortUpload=function(){i.events.fire(s.ProgressBarEvents.cancel)},i}return i(e,t),e.prototype.setState=function(t,e){this._progress=t,this.config.template?this._progressText=this.config.template(t,e):this._progressText=this._progress.toFixed(1)+"%",this.paint()},e.prototype._draw=function(){return o.el(".progress-bar",{_key:this._uid},[o.el(".progress-indicator",{style:{width:this._progress+"%"}}),o.el(".progress-text",{".innerHTML":this._progressText}),o.el("button",{class:"dhx_btn dhx_btn--flat dhx_btn_small action-abort-all",onclick:this._abortUpload},a.default.cancel)])},e}(r.View);e.ProgressBar=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this._readerStack=[],this._isActive=!1,this._data=t}return t.prototype.add=function(t,e){void 0===e&&(e=!1),this._readerStack.push(t),e||this.read()},t.prototype.read=function(){var t=this;if(this._readerStack.length&&!this._isActive){var e=this._readerStack.shift();this._isActive=!0;var n=new FileReader;n.readAsDataURL(e.file),n.onload=function(n){var i=new Image;i.src=n.target.result,i.onload=function(){t._data.exists(e.id)&&t._data.update(e.id,{image:i}),t._isActive=!1,t.read()}},n.onerror=function(){t._isActive=!1,t.read()}}},t.prototype.stop=function(){this._readerStack=[]},t}();e.ReadStackPreview=i}])}),window.dhx_legacy){if(window.dhx)for(var key in dhx)dhx_legacy[key]=dhx[key];window.dhx=dhx_legacy,delete window.dhx_legacy}